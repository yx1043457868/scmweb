webpackJsonp([38],{"+S1p":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("PBmY");var o=s("I4Nl"),a=s.n(o),n=s("teIl"),r={name:"fav",components:{MescrollVue:s("2Un3").a,Header:n.a},data:function(){return{mescroll:null,mescrollDown:{},mescrollUp:{callback:this.upCallback,page:{num:0,size:10},htmlNodata:'<p class="upwarp-nodata">-- 没有更多了 --</p>',noMoreSize:5,empty:{warpId:"mescroll",icon:"static/images/none.png",tip:"暂无相关数据~"}},favoryList:[]}},beforeRouteEnter:function(t,e,s){s(function(t){t.$refs.mescroll.beforeRouteEnter()})},beforeRouteLeave:function(t,e,s){this.$refs.mescroll.beforeRouteLeave(),s()},methods:{addFavory:function(t,e){var s=this,o=this.$store.getters.account?this.$store.getters.account:"",n="{'id':'"+t+"','account':'"+(o?o.account:"")+"'}";this.$post("/appVpProduct/vpDelFavory.do",{content:n,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){"yes"==JSON.parse(t).optFlag?(a()({message:"操作成功",duration:950}),s.favoryList.splice(e,1)):a()({message:"收藏失败",duration:950})})},mescrollInit:function(t){this.mescroll=t},upCallback:function(t,e){var s=this,o=this.$store.getters.account?this.$store.getters.account:"",a='{"account": "'+(o?o.account:"")+'","pageSize": "'+t.size+'","page": "'+t.num+'"}';this.$post("/appVpProduct/vpSelectFavoryList.do",{content:a,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(o){var a=JSON.parse(o);if(a.res&&a.res.list){var n=a.res.list;1===t.num&&(s.favoryList=[]),s.favoryList=s.favoryList.concat(n),s.$nextTick(function(){e.endSuccess(n.length)})}else s.favoryList=[],s.$nextTick(function(){e.endSuccess(s.favoryList.length)})}).catch(function(t){e.endErr()})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header",{attrs:{title:"我的收藏"}}),t._v(" "),s("mescroll-vue",{ref:"mescroll",attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[s("div",{staticClass:"order-wrapper",attrs:{id:"mescroll"}},[s("ul",{staticClass:"goods-list"},t._l(t.favoryList,function(e,o){return s("li",{key:o,staticClass:"mui-table-view-cell",attrs:{pid:e.id,chag:e.equation_factor,class_id:e.class_id}},[s("router-link",{attrs:{to:{path:"/detail",query:{id:e.id}}}},[s("div",{staticClass:"food-link"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+e.img_path,expression:"baseurl+food.img_path"}]}),t._v(" "),s("div",{staticClass:"recommend"},[s("h4",{staticClass:"skuName"},[t._v(t._s(e.sku_name))]),t._v(" "),s("p",{staticClass:"styleno"},[t._v("规格："+t._s(e.styleno))]),s("br")])])]),t._v(" "),s("div",{staticClass:"favory-box",on:{click:function(s){return s.stopPropagation(),t.addFavory(e.id,o)}}},[s("i",{staticClass:"iconfont favory"},[t._v("")])])],1)}),0)])])],1)},staticRenderFns:[]};var c=s("C7Lr")(r,i,!1,function(t){s("mUoL")},"data-v-6c570191",null);e.default=c.exports},mUoL:function(t,e){}});