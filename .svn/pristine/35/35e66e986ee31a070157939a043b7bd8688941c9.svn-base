webpackJsonp([20],{bhIR:function(t,s){},fjti:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("OgVB");var o=e("/Lyv"),n=e.n(o),i=e("mvHQ"),a=e.n(i),c=(e("34+y"),e("X+yh")),r=e.n(c),l=e("teIl"),h=e("0xDb"),u=(e("NYxO"),{name:"Login",components:{Header:l.a},data:function(){return{userImg:this.$store.getters.account.logoPath?this.$store.getters.account.logoPath:e("Z2Ou"),phone:"",password:"",Info:"",popupVisible:!1,name:"",value:[],x:"",currentTags:{},dateSlots:[],showAddress:!1,myCroppaLicence:[],show:!0,show0:!0,show1:!0,show2:!0,show3:!0,old:"",new1:"",new2:"",disabled:!1,count:60,code_text:"获取验证码",intervalobj:null,code:"",Invatecode:"",nm:"",shopObj:""}},methods:{modify:function(t){0==t&&(this.show=!1,this.show0=!1),2==t?(this.show=!1,this.show2=!1):3==t?(this.show=!1,this.show1=!1):1==t&&(this.show=!1,this.show3=!1)},sendCode:function(){var t=this;if(""==this.phone)return r()({message:"请输入手机号",duration:1e3}),!1;if(!Object(h.g)(this.phone))return r()({message:"请输入正确的手机号格式",duration:1e3}),!1;this.intervalobj=setInterval(function(){t.count>0?(t.code_text=t.count+"s后重新获取",t.disabled=!0,t.count--):0==t.count&&(t.code_text="获取验证码",t.disabled=!1,clearInterval(t.intervalobj),t.count=60)},1e3);var s="{'phone':'"+this.phone+"'}";this.$post("/appAccount/sendModifyYzm.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(t){var s=JSON.parse(t);(s.optFlag="yes")?r()(s.optDesc):(r()(s.optDesc),this.code_text="获取验证码",this.disabled=!1,clearInterval(this.intervalobj),this.count=60)}).catch(function(t){console.log(t)})},change:function(){var t=this.$store.getters.account?this.$store.getters.account:{},s={inviteCode:this.Invatecode,accountId:t.id},e=this;this.$post("/appAccount/bindingSalesman.do",{content:a()(s),version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var s=JSON.parse(t);if(!(s.optFlag="yes"))return r()({content:s.optDesc,btn:"确定"}),!1;e.show=!e.show,e.show2=!0,e.show1=!0,(e.$store.getters.shop?e.$store.getters.shop:{}).salesman=s.salesman,e.$store.state.logindata.shop.salesman=s.salesman,e.$store.commit("setData",e.$store.state.logindata),r()({message:s.optDesc,time:2})}).catch(function(t){console.log(t)})},logHidex:function(t){},logShowx:function(t){},onShadowChange:function(t,s){},handleNewImage:function(){},back:function(t){if(1!=t)return 2==t?(this.show=!this.show,this.show1=!0,void(this.show2=!0)):void(3==t?(this.show=!this.show,this.show3=!0,this.show2=!0,this.show1=!0):4==t?(this.show=!this.show,this.show3=!0,this.show2=!0,this.show1=!0):0==t&&(this.show=!this.show,this.show2=!0,this.show1=!0,this.show0=!0));this.$router.back(-1)},backTo:function(t){2==t?this.savePass():0==t?this.saveName():3==t?this.change():4==t&&this.SavePhone()},SavePhone:function(){var t=this;if(""==this.phone)return n.a.confirm("未做修改，是否退出?").then(function(s){t.back(4)}).catch(function(){}),!1;if(!Object(h.g)(this.phone))return n.a.confirm("手机格式不正确，是否放弃修改?").then(function(s){t.back(4)}).catch(function(){}),!1;var s="{'oldPhone':'"+this.Info.phone+"','newPhone':'"+this.phone+"','yzm':'"+this.code+"'}";this.$post("/appAccount/updatephone.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(s){var e=JSON.parse(s);if(console.log(e),"yes"!=e.optFlag)return n.a.confirm("手机号已注册或验证码不正确，是否退出?").then(function(s){t.back(4)}).catch(function(){}),!1;t.Info.phone=t.phone,t.$store.state.logindata.account.phone=t.phone,t.$store.commit("setData",t.$store.state.logindata),r()(e.optDesc),t.back(4)})},savePass:function(){var t=this;if(""!=this.old)if(""!=this.new1)if(this.new1.length>20||this.new1.length<6)r()({message:"密码长度不正确",time:2});else if(this.new1==this.new2)if(this.old!=this.new1){var s="{'account':'"+this.Info.account+"','oldPwd':'"+this.old+"',,'newPwd':'"+this.new2+"'}";this.$post("/appAccount/updatePassWard.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(s){var e=JSON.parse(s);if("yes"==e.optFlag)if(t.$route.query.firstFlag)t.$router.push({path:"/"});else{r()(e.res),r()({message:e.res,time:2});var o=setInterval(function(){t.back(2),clearInterval(o)},2e3)}else r()({message:e.res,time:2})}).catch(function(t){console.log(t)})}else r()({message:"新密码不能与旧密码一样，请重新修改！",time:2});else r()({message:"两次新密码请保持一致！",time:2});else r()({message:"请输入新密码",time:2});else r()({message:"请输入旧密码",time:2})},loginOut:function(){var t=this;n.a.confirm("是否退出，重新登录?").then(function(s){if("confirm"==s){t.$post("/appAccount/loginOut.do",{content:"{}",version:"kkllo",login_token:t.$store.getters.logintoken}).then(function(s){(JSON.parse(s).yes="yes")&&(t.$store.commit("loginOut"),t.$store.commit("changIsFirstShare",""),t.$router.push("/login"))})}}).catch(function(){})},saveName:function(){var t=this.$store.getters.account?this.$store.getters.account:{},s=this.$store.getters.shop?this.$store.getters.shop:{},e="{'account':'"+t.account+"','shopId':'"+t.shopId+"','shopName':'"+this.name+"'}",o=this;this.$post("/appAccount/setAccountShopName.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var e=JSON.parse(t);if("yes"==e.optFlag){s.shop_name=o.name,o.$store.state.logindata.shop.shop_name=o.name,o.$store.commit("setData",o.$store.state.logindata),r()({message:e.optDesc,time:2});var n=setInterval(function(){o.back(0),clearInterval(n)},2e3)}else r()({message:e.optDesc,time:2})}).catch(function(t){console.log(t)})}},mounted:function(){this.Info=this.$store.getters.account?this.$store.getters.account:{};var t=this.$store.getters.company?this.$store.getters.company:{},s=this.$store.getters.shop?this.$store.getters.shop:{};this.nm=t.nm,this.name=s.shop_name,this.shopObj=s},created:function(){this.$route.query.firstFlag&&(r()({message:"首次登陆修改密码，并重新登录",duration:2e3}),this.modify(2))}}),p={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[e("mt-header",{attrs:{title:"账户管理"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(s){t.back(1)}},slot:"left"})],1),t._v(" "),e("form",{staticClass:"mui-input-group"},[e("div",{staticClass:"mui-input-row",staticStyle:{height:"auto",padding:"10px 0"}},[e("label",[t._v("头像")]),t._v(" "),e("div",{staticClass:"right headerImg"},[e("img",{staticClass:"header-icon",attrs:{src:t.userImg}})])]),t._v(" "),e("div",{staticClass:"mui-input-row",on:{click:function(s){t.modify(0)}}},[e("label",[t._v("名称")]),t._v(" "),e("i",{staticClass:"iconfont password"},[t._v("")]),t._v(" "),e("div",{staticClass:"iRight"},[t._v(t._s(t.name))])]),t._v(" "),e("div",{staticClass:"mui-input-row",on:{click:function(s){t.modify(1)}}},[e("label",[t._v("手机绑定")]),t._v(" "),e("i",{staticClass:"iconfont password"},[t._v("")]),t._v(" "),e("div",{staticClass:"iRight"},[t._v(t._s(t.Info.phone))])]),t._v(" "),e("div",{staticClass:"mui-input-row",on:{click:function(s){t.modify(2)}}},[e("label",[t._v("修改密码")]),t._v(" "),e("i",{staticClass:"iconfont password"},[t._v("")])])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.show0,expression:"!show0"}],staticClass:"password0"},[e("mt-header",{attrs:{title:"修改名称"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(s){t.back(0)}},slot:"left"}),t._v(" "),e("mt-button",{attrs:{slot:"right"},on:{click:function(s){t.backTo(0)}},slot:"right"},[e("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),e("form",{staticClass:"mui-input-group"},[e("div",{staticClass:"mui-input-row"},[e("label",[t._v("名称")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"mui-input-password",attrs:{type:"text",placeholder:"请输入名称"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.show2,expression:"!show2"}],staticClass:"password1"},[e("mt-header",{attrs:{title:"修改密码"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(s){t.back(2)}},slot:"left"}),t._v(" "),e("mt-button",{attrs:{slot:"right"},on:{click:function(s){t.backTo(2)}},slot:"right"},[e("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),e("form",{staticClass:"mui-input-group"},[e("div",{staticClass:"mui-input-row"},[e("label",[t._v("旧密码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.old,expression:"old"}],staticClass:"mui-input-password",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.old},on:{input:function(s){s.target.composing||(t.old=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("label",[t._v("新密码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new1,expression:"new1"}],staticClass:"mui-input-password",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.new1},on:{input:function(s){s.target.composing||(t.new1=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"mui-input-row"},[e("label",[t._v("确认密码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new2,expression:"new2"}],staticClass:"mui-input-password",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.new2},on:{input:function(s){s.target.composing||(t.new2=s.target.value)}}})])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.show1,expression:"!show1"}],staticClass:"password2"},[e("mt-header",{attrs:{title:"修改业务员"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(s){t.back(3)}},slot:"left"}),t._v(" "),e("mt-button",{attrs:{slot:"right"},on:{click:function(s){t.backTo(3)}},slot:"right"},[e("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),e("form",{staticClass:"mui-input-group"},[e("div",{staticClass:"mui-input-row"},[e("label",[t._v("输入邀请码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Invatecode,expression:"Invatecode"}],staticClass:"mui-input-password",attrs:{type:"text",placeholder:"请输入邀请码"},domProps:{value:t.Invatecode},on:{input:function(s){s.target.composing||(t.Invatecode=s.target.value)}}})])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.show3,expression:"!show3"}],staticClass:"password3"},[e("mt-header",{attrs:{title:"修改手机"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(s){t.back(4)}},slot:"left"}),t._v(" "),e("mt-button",{attrs:{slot:"right"},on:{click:function(s){t.backTo(4)}},slot:"right"},[e("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),e("form",{staticClass:"mui-input-group"},[e("mt-field",{attrs:{label:"手机号",placeholder:"请输入新手机号",type:"tel"},model:{value:t.phone,callback:function(s){t.phone=s},expression:"phone"}}),t._v(" "),e("button",{staticClass:"reg-btn",staticStyle:{"line-height":"10px"},attrs:{type:"button",disabled:t.disabled},on:{click:t.sendCode}},[t._v(t._s(t.code_text))]),t._v(" "),e("mt-field",{attrs:{label:"验证码",placeholder:"请输入验证码",type:"tel"},model:{value:t.code,callback:function(s){t.code=s},expression:"code"}})],1)],1),t._v(" "),t.show?e("div",{staticClass:"loginx"},[e("button",{staticClass:"loginOut",attrs:{type:"button"},on:{click:t.loginOut}},[t._v("退出登录")])]):t._e()])},staticRenderFns:[]};var d=e("VU/8")(u,p,!1,function(t){e("bhIR")},"data-v-e8f0237a",null);s.default=d.exports}});