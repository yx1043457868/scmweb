webpackJsonp([34],{Xxxb:function(t,e){},kt95:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("OgVB");var s=o("/Lyv"),n=o.n(s),r=(o("34+y"),o("X+yh")),i=o.n(r),a=o("teIl"),c=o("0xDb"),d={data:function(){return{orderCode:"",groupCode:"",shopObj:"",goodsList:[]}},components:{Header:a.a},filters:{capitalize:function(t,e,o,s){var n=Object(c.m)(t||0,s||1),r=parseInt(t/s);return 0==n?r.toFixed(2)+""+o:0==r?n+""+e:r+""+o+n+e},qty:function(t,e){return Object(c.k)(parseFloat(t)||0,parseFloat(e)||1).toFixed(2)}},mounted:function(){this.orderCode=this.$route.query.orderCode,this.groupCode=this.$route.query.groupCode,this.initOrder()},methods:{back:function(){this.$router.back(-1)},checkInput:function(t,e){if("1"==t.price_type){if(t.sendQty>t.sendQtyx)return i()("实收数量不能大于实发数量"),void(t.sendQty=t.sendQtyx);t.sendQty=e}},initOrder:function(){var t=this,e="{'orderCode':'"+this.orderCode+"','groupCode':'"+this.groupCode+"'}";this.$post("/appOrder3/toConfirmGroup.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(e){var o=JSON.parse(e);"yes"==o.optFlag&&(t.goodsList=o.res);var s=t.$store.getters.shop?t.$store.getters.shop:{};t.goodsList.forEach(function(t){"2"==s.typeId?(t.sendQty=Object(c.k)(parseFloat(t.sendQty),parseFloat(t.equation_factor)).toFixed(2),t.sendQtyx=t.sendQty):(t.sendQty=parseFloat(t.sendQty).toFixed(2),t.sendQtyx=t.sendQty)})}).catch(function(t){console.log(t)})},submitOrder:function(){var t=this;n.a.confirm("确认收货？").then(function(e){var o=t,s=t.$store.getters.account?t.$store.getters.account:{},n=new Array;t.goodsList.forEach(function(t,e){var o=[];if("1"==t.price_type)var s=t.sendQty,r=t.equation_factor,i=Object(c.l)(s,r);else i=t.sendQty;var a=t.tpl_id;o.push("'recivedQty':'"+i+"'"),o.push("'tplId':'"+a+"'"),n.push("{"+o.join(",")+"}")});var r="{'account': '"+s.account+"','groupSkuList': ["+n.join(",")+"],'group_code': '"+o.groupCode+"','order_code': '"+o.orderCode+"'}",a=o;a.$post("/appOrder3/confirmGroup.do",{content:r,version:"kkllo",login_token:t.$store.getters.logintoken}).then(function(t){var e=JSON.parse(t);"yes"==e.optFlag?(i()("确认收货成功"),a.$router.push("/vpOrderList")):i()(e.optDesc)}).catch(function(t){console.log(t)})}).catch(function(){})}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"confirmInfox"}},[o("mt-header",{attrs:{title:"确认收货"}},[o("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"})],1),t._v(" "),o("section",{staticClass:"receiving"},[o("h2",[o("i",{staticClass:"iconfont password",staticStyle:{color:"#eb6000","margin-right":"3px"}},[t._v("")]),t._v("运单编号："+t._s(t.orderCode))]),t._v(" "),o("ul",{staticClass:"shopping_food",attrs:{id:"goodsList"}},t._l(t.goodsList,function(e,s){return o("li",{key:s,staticClass:"clearfix",attrs:{tplId:e.tpl_id,chag:e.equation_factor,price_type:e.price_type}},[o("img",{attrs:{src:t.baseurl+e.img_path}}),t._v(" "),o("div",{staticClass:"infor"},[o("span",[t._v(t._s(e.skuName))]),t._v(" "),o("span",[t._v("规格："+t._s(e.styleno))]),t._v(" "),"1"==e.price_type?o("span",[t._v("实发："+t._s(e.sendQtyx)+t._s(e.assist_unit))]):t._e(),t._v(" "),"1"!=e.price_type?o("span",[t._v("实发："+t._s(t._f("capitalize")(e.sendQtyx,e.uom_default,e.assist_unit,e.equation_factor)))]):t._e()]),t._v(" "),o("div",{staticClass:"right"},[o("label",[t._v("实收：")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.sendQty,expression:"item.sendQty"}],staticStyle:{width:"70px",height:"25px","text-align":"center"},attrs:{type:"number",min:"0",onkeyup:"value=value.replace(/[^0-9]/g,'')",onpaste:"value=value.replace(/[^0-9]/g,'')",oncontextmenu:"value=value.replace(/[^0-9]/g,'')"},domProps:{value:e.sendQty},on:{blur:function(o){t.checkInput(e,e.sendQty)},input:function(o){o.target.composing||t.$set(e,"sendQty",o.target.value)}}}),t._v(" "),"1"==e.price_type?o("em",[t._v(t._s(e.assist_unit))]):t._e(),t._v(" "),"1"!=e.price_type?o("em",[t._v(t._s(e.uom_default))]):t._e()])])}),0)]),t._v(" "),o("footer",{staticClass:"add_address"},[o("button",{attrs:{type:"button"},on:{click:t.submitOrder}},[t._v("确认收货")])])],1)},staticRenderFns:[]};var p=o("VU/8")(d,u,!1,function(t){o("Xxxb")},"data-v-796847b6",null);e.default=p.exports}});