webpackJsonp([30],{YTex:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("teIl"),n={name:"couponsCenter",components:{MescrollVue:e("p0f0").a,Header:o.a},data:function(){return{mescroll:null,mescrollDown:{},mescrollUp:{callback:this.upCallback,page:{num:0,size:10},htmlNodata:'<p class="upwarp-nodata">-- 没有更多了 --</p>',noMoreSize:5,empty:{warpId:"mescroll",icon:"static/images/none.png",tip:"暂无相关数据~"}},couponList:[],couponStatusCount:[],searchTx:"",stateId:"N",isActive:"0",login_info:{},result:{},activeClass:"active",errorClass:"disable"}},computed:{classObject:function(){return{used:"Y"==this.stateId,over:"D"==this.stateId}}},beforeRouteEnter:function(t,s,e){e(function(t){t.$refs.mescroll.beforeRouteEnter()})},beforeRouteLeave:function(t,s,e){this.$refs.mescroll.beforeRouteLeave(),e()},methods:{useHandle:function(t){0==t?this.$router.push({path:"/classify"}):this.$router.push({path:"/preorderList"})},chosen:function(t,s){this.isActive=t,this.stateId=s,this.mescroll.resetUpScroll()},mescrollInit:function(t){this.mescroll=t},upCallback:function(t,s){var e=this,o=this.$store.getters.account?this.$store.getters.account:"",n='{"account": "'+(o?o.account:"")+'", "state": "'+this.stateId+'","pageSize": "'+t.size+'","pageNo": "'+t.num+'"}';this.$post("/appCounpon/getMyCouponApp.do",{content:n,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(o){var n=JSON.parse(o);if(e.couponStatusCount=n.res.couponStatusCount,n.res&&n.res.couponList){var c=n.res.couponList;1===t.num&&(e.couponList=[]),e.couponList=e.couponList.concat(c),e.$nextTick(function(){s.endSuccess(c.length)})}else e.couponList=[],e.$nextTick(function(){s.endSuccess(e.couponList.length)})}).catch(function(t){s.endErr()})}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("Header",{attrs:{title:"我的优惠券"}}),t._v(" "),e("div",{staticClass:"nav"},t._l(t.couponStatusCount,function(s,o){return e("p",{key:o,class:{active:o==t.isActive},attrs:{value:s.state},on:{click:function(e){t.chosen(o,s.state)}}},[t._v(t._s(s.couponStatus)+"("+t._s(s.totalCount)+")\n        ")])}),0),t._v(" "),e("mescroll-vue",{ref:"mescroll",attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[e("div",{staticClass:"card-content",attrs:{id:"mescroll"}},[e("ul",{staticClass:"card-ul",attrs:{id:"goods-ul"}},t._l(t.couponList,function(s,o){return e("li",{key:o,staticClass:"card-list"},[e("div",{staticClass:"icon-card",class:["N"===t.stateId?t.activeClass:t.errorClass]},[e("strong",[e("span",[t._v("￥")]),t._v(t._s(s.couponValue))]),t._v(" "),e("p",[t._v("满"+t._s(s.minMoney)+"元可用")])]),t._v(" "),e("div",{staticClass:"card-info"},[e("h4",{staticClass:"card-name"},[t._v(t._s(s.couponName))]),t._v(" "),e("p",{staticClass:"card-time"},[t._v(t._s(t._f("format")(s.beginTime))+"~"+t._s(t._f("format")(s.endTime)))]),t._v(" "),"N"==t.stateId?e("button",{staticClass:"mui-btn card-btn",on:{click:function(e){e.stopPropagation(),t.useHandle(s.yuGou)}}},[t._v("立即使用\n                        ")]):t._e(),t._v(" "),e("div",{staticClass:"status",class:t.classObject})])])}),0)])])],1)},staticRenderFns:[]};var a=e("VU/8")(n,c,!1,function(t){e("eWfY")},"data-v-92182320",null);s.default=a.exports},eWfY:function(t,s){}});