webpackJsonp([45],{rvgw:function(t,s){},xP2T:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("34+y");var o=e("X+yh"),a=e.n(o),i={data:function(){return{data1:[],list:[],foot:!1,show:!0,actived:!0,show1:!1}},methods:{initMessage:function(){var t="{'account':'"+(this.$store.getters.account?this.$store.getters.account:{}).account+"'}",s=this;this.$post("/message/messageList.do",{content:t,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){s.data1=JSON.parse(t).res,s.data1.forEach(function(t,s){t.show=!0,t.show1=!0}),s.list=s.data1}).catch(function(t){console.log(t)})},readMessage:function(t,s,e,o){if(e.show1=!e.show1,this.$set(this.data1,o,e),"N"==s){var i="{'ids':'["+t+"]'}",n=this;this.$post("/message/messageRead.do",{content:i,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var s=JSON.parse(t);"yes"==s.optFlag?(e.isRead="Y",n.$set(n.data1,o,e)):a()(s.optDesc)}).catch(function(t){console.log(t)})}},edit:function(){this.foot=!this.foot},back:function(){this.$router.back(-1)},messageSel:function(t,s){s.show=!s.show,this.$set(this.data1,t,s)},selectAll:function(){var t=this;this.actived=!this.actived,this.actived?this.data1.forEach(function(s,e){s.show=!0,t.$set(t.data1,e,s)}):this.data1.forEach(function(s,e){s.show=!1,t.$set(t.data1,e,s)})},delMessage:function(){var t=[];this.data1.forEach(function(s,e){s.show||t.push(s.id)});var s="{'ids':'["+t+"]'}",e=this;this.$post("/message/messageDel.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){"yes"==JSON.parse(t).optFlag?(e.initMessage(),a()({message:"删除成功",duration:1e3})):a()({message:"获取失败",duration:1e3})})}},mounted:function(){this.initMessage()}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"header"},[e("mt-header",{attrs:{title:"我的消息"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(s){t.back(1)}},slot:"left"}),t._v(" "),e("mt-button",{attrs:{slot:"right"},on:{click:function(s){t.edit(1)}},slot:"right"},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.foot,expression:"!foot"}],staticClass:"headBtn"},[t._v("编辑")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.foot,expression:"foot"}],staticClass:"headBtn",staticStyle:{background:"#dddddd",color:"#666"}},[t._v("取消")])])],1)],1),t._v(" "),e("section",{staticClass:"my_message my-content",attrs:{id:"msgList"}},[e("ul",{attrs:{id:"ul"}},t._l(t.data1,function(s,o){return e("li",{key:o,staticClass:"radio",attrs:{read:s.isRead,"data-id":s.id}},["N"==s.isRead?e("i",{staticClass:"noRead"}):t._e(),t._v(" "),t.foot?e("div",{staticClass:"s",on:{click:function(e){t.messageSel(o,s)}}},[s.show?e("em",{staticClass:"iconfont mes"},[t._v("")]):t._e(),t._v(" "),s.show?t._e():e("em",{staticClass:"iconfont mes1"},[t._v("")])]):t._e(),t._v(" "),e("span",{class:t.foot?"s1":"",on:{click:function(e){t.readMessage(s.id,s.isRead,s,o)}}},[t._v(t._s(s.msg))]),t._v(" "),s.show1?t._e():e("div",{staticClass:"show_content"},[e("p",[t._v(t._s(s.msg))])]),t._v(" "),s.show1?e("i",{staticClass:"iconfont password"},[t._v("")]):t._e(),t._v(" "),s.show1?t._e():e("i",{staticClass:"iconfont password"},[t._v("")])])}),0)]),t._v(" "),t.foot?e("footer",{staticClass:"all_select"},[e("span",{on:{click:t.selectAll}},[t._v("全选")]),t._v(" "),e("button",{staticClass:"delete_btn",attrs:{type:"button"},on:{click:t.delMessage}},[t._v("删除")])]):t._e()])},staticRenderFns:[]};var c=e("VU/8")(i,n,!1,function(t){e("rvgw")},"data-v-3cb5879d",null);s.default=c.exports}});