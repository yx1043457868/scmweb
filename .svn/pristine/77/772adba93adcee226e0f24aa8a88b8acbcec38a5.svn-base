webpackJsonp([12],{"9sCE":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("OgVB");var s=a("/Lyv"),i=a.n(s),c=(a("34+y"),a("X+yh")),n=a.n(c),r=a("y7b9"),o=a("HPsP"),l=a("0xDb"),u=(a("NYxO"),{name:"shopCart",components:{Tabbar:r.a,cartcontrol:o.a},data:function(){return{carts:[],selected:"/shopCart",checkedLen:"",isShow:!1,couponSend:"",minOrderNum:0,outcarts:[],accountObj:this.$store.getters.account?this.$store.getters.account:"",shopType:this.$store.getters.shop.shopType?this.$store.getters.shop.shopType:4,checkAll:!1,totalPrice:"",checkedCount:0}},filters:{FormatGift:function(t,e){var a=1;if(0==e.full_gift.requireType)if(0==e.full_gift.unitType){var s=Object(l.j)(Object(l.l)(parseFloat(e.value||0),e.equation_factor),parseFloat(e.mnum_value)||0);a=parseInt(Object(l.k)(parseFloat(s),parseFloat(e.full_gift.require)))}else a=parseInt(Object(l.k)(parseFloat(e.value)||0,parseFloat(e.full_gift.require)));else a=parseInt(Object(l.k)(parseFloat(e.totalPrice)||0,parseFloat(e.full_gift.require)));return Object(l.l)(parseFloat(t),parseFloat(a))},FormatAmount:function(t,e,a){var s=parseInt(Object(l.k)(parseFloat(a),parseFloat(e)));return Object(l.l)(parseFloat(t),parseFloat(s))}},computed:{shopCount:function(){return this.$store.getters.shopCount}},created:function(){this.changecompanyId()},methods:{changecompanyId:function(){var t=this,e="Android";e=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")>-1?"android":"iPhone",this.$post("/appAccount/toAccountFot.do",{content:"{'account':'"+this.$store.getters.account.account+"'}",version:"kkllo",deviceOS:e,login_token:this.$store.getters.logintoken}).then(function(e){var a=JSON.parse(e);if("yes"==a.optFlag){var s=a.res.company,i=a.res.account;t.$store.getters.account&&t.$store.getters.account.companyId!=i.companyId?(t.$store.commit("setData",a.res),t.$store.commit("setpcid",parseFloat(s.id)),n()("后台已帮你更换门店"),setTimeout(function(){window.location.href=window.location.href},2e3)):(t.shoppingCart(),t.initMinOrderNum())}else n()("加载失败")})},changetotalPrice:function(){var t=this;return t.carts.reduce(function(e,a,s){return a.checked?t.carts[s].rkpriceList?t.carts[s].rkpriceList?Object(l.j)(Object(l.j)(e,Object(l.l)(parseFloat(a.rank_price)||0,parseFloat(a.value))),Object(l.l)(parseFloat(a.price||0),parseFloat(a.mnum_value)||0)):void 0:Object(l.j)(Object(l.j)(e,Object(l.l)(parseFloat(a.unit_price)||0,parseFloat(a.value))),Object(l.l)(parseFloat(a.price||0),parseFloat(a.mnum_value)||0)):e},0)},changeCheckOne:function(t){this.carts[t].checked=!this.carts[t].checked,this.totalPrice=this.changetotalPrice(),this.checkedCount=this.carts&&this.carts.filter(function(t){return t.checked}).length,0!=this.checkedCount&&this.checkedCount==this.carts.length?this.checkAll=!0:this.checkAll=!1},changeCheckAll:function(){var t=this;this.checkAll=!this.checkAll,this.carts=this.carts&&this.carts.map(function(e){return e.checked=t.checkAll,e}),this.totalPrice=this.changetotalPrice(),this.checkedCount=this.carts&&this.carts.filter(function(t){return t.checked}).length},handleShow:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments[2],s=arguments[3];return t<=Object(l.j)(Object(l.l)(parseFloat(e||0),a),parseFloat(s)||0)},delHandle:function(t){var e=this;i.a.confirm("确定删除该产品?").then(function(a){e.$store.commit("shanchu",t),e.carts=e.$store.state.carts||JSON.parse(localStorage.getItem("carts")),e.totalPrice=e.changetotalPrice(),e.checkedCount=e.carts&&e.carts.filter(function(t){return t.checked}).length,0!=e.checkedCount&&e.checkedCount==e.carts.length?e.checkAll=!0:e.checkAll=!1}).catch(function(){})},back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.back(-1)},go:function(){this.$router.push({path:"/classify"})},editor:function(){this.isShow=!0},finish:function(){this.isShow=!1},clear:function(){var t=this;0!=this.checkedCount?i.a.confirm("确定删除勾选产品?").then(function(e){var a=t.carts.filter(function(t){return 0==t.checked});t.$store.commit("setcarts",a),t.carts=a,t.totalPrice=t.changetotalPrice(),t.checkedCount=t.carts&&t.carts.filter(function(t){return t.checked}).length,0!=t.checkedCount&&t.checkedCount==t.carts.length?t.checkAll=!0:t.checkAll=!1}).catch(function(){}):n()("请先选购商品")},clearOut:function(){var t=this;i.a.confirm("确定删除该产品?").then(function(e){t.outcarts=[];var a=t.$store.state.carts||JSON.parse(localStorage.getItem("carts"));t.carts=a.filter(function(t){return"N"!=t.is_enable}),t.$store.commit("setcarts",t.carts),t.totalPrice=t.changetotalPrice(),t.checkedCount=t.carts&&t.carts.filter(function(t){return t.checked}).length,0!=t.checkedCount&&t.checkedCount==t.carts.length?t.checkAll=!0:t.checkAll=!1}).catch(function(){})},collect:function(){var t=[],e="";if(this.carts.filter(function(t){return 0!=t.checked}).forEach(function(e){t.push(e.id)}),e=this.accountObj?this.accountObj.account:"",this.accountObj){var a="{'id':'"+t.join(",")+"','account':'"+e+"'}";this.$post("/appVpProduct/vpAddFavory.do",{content:a,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){"yes"==JSON.parse(t).optFlag?n()("商品已加入收藏"):n()("收藏失败")})}else this.$router.push({path:"/login"})},goClassify:function(){this.$router.push({path:"/classify"})},getTClasses:function(){var t=[],e=[];this.orders.forEach(function(e){t.push(e.class_id)});for(var a=0;a<t.length;a++)-1==e.indexOf(t[a])&&e.push(t[a]);return e},initMinOrderNum:function(){var t=this,e=this.$store.getters.account.companyId;this.$post("/companyConfig/initCompanyConfig.do",{content:'{"companyId": "'+e+'"}',version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var a=JSON.parse(e);a.res?t.minOrderNum=a.res:t.minOrderNum=0})},shoppingCart:function(){var t,e=this,a=[];if(this.carts=this.$store.state.carts,!(this.carts.length<1)){this.carts.forEach(function(t,e){a.push(t.id)}),t=this.$store.getters.account.companyId;var s=this.$store.getters.account.shopId?this.$store.getters.account.shopId:"",i=this.$store.getters.shop.shopType?this.$store.getters.shop.shopType:"",c="{'ids':'"+a.join(",")+"','companyId':'"+t+"','shopId':'"+s+"','shopType':'"+i+"'}";this.$post("/appVpProduct/shoppingCart.do",{content:c,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var a=JSON.parse(t);if("yes"==a.optFlag){var s=a.res;s.length>0?(e.carts.map(function(t,a){var i=s.findIndex(function(e){return e.id==t.id});if(-1==i||null==i||void 0==i)e.$store.commit("shanchu",a),n()({message:"此商品已移除",duration:950});else{var c=s[i];e.carts[a].qty=c.qty?c.qty:0,e.carts[a].unit_price=c.unit_price?c.unit_price:0,e.carts[a].price=c.price?c.price:0,e.carts[a].totalPrice=Object(l.o)(Object(l.j)(Object(l.l)(e.carts[a].value||0,c.unit_price||0),Object(l.l)(e.carts[a].mnum_value||0,c.price||0))),e.carts[a].full_gift=c.full_gift?JSON.parse(c.full_gift):"",e.carts[a].qty_flag=c.qty_flag,e.carts[a].sku_type=c.sku_type,e.carts[a].sku_name=c.sku_name,e.carts[a].img_path=c.img_path,e.carts[a].styleno=c.styleno,e.carts[a].sku_code=c.sku_code,e.carts[a].retail_flag=c.retail_flag,e.carts[a].wm_code=c.wm_code,e.carts[a].is_enable=c.is_enable,e.carts[a].equation_factor=c.equation_factor,e.carts[a].uom_default=c.uom_default,e.carts[a].unit=c.unit;var r=Object(l.l)(1*e.carts[a].value||0,1*e.carts[a].equation_factor||0);Object(l.j)(r,1*e.carts[a].mnum_value||0)>e.carts[a].qty?e.carts[a].sku_flag=!0:e.carts[a].sku_flag=!1}}),e.carts=e.carts.filter(function(t){return 0!=t.unit_price}),e.$store.commit("setcarts",e.carts),e.totalPrice=e.changetotalPrice(),e.outcarts=e.carts.filter(function(t){return"N"==t.is_enable||""==t.is_enable}),e.carts=e.carts.filter(function(t){return"Y"==t.is_enable}),e.checkAll=e.carts.every(function(t){return t.checked}),e.checkedCount=e.carts&&e.carts.filter(function(t){return t.checked}).length):(e.carts=[],e.$store.commit("setcarts",e.carts))}})}},addCart:function(t,e){this.$store.commit("add",e),t.value=this.$store.state.carts[e].value,t.rank_price=this.$store.state.carts[e].rank_price},changeValue:function(t,e,a){var s=a.target.value||0;1==e?t.value=parseFloat(s.toString().match(/\d+(\.\d{0,2})?/)?s.toString().match(/\d+(\.\d{0,2})?/)[0]:"")||0:(-1!=t.value.toString().indexOf(".")&&n()("该商品只能输入整数"),t.value=parseInt(s.toString().replace(/[^\d]+/g,0))||0),"1"!=t.equation_factor?Object(l.f)(t.value)&&Object(l.f)(t.mnum_value)&&(n()("采购数量不能为空"),t.value=0,t.mnum_value=1):Object(l.f)(t.value)&&Object(l.f)(t.mnum_value)&&(n()("采购数量不能为空"),t.value=1,t.mnum_value=0),t.totalPrice=Object(l.o)(Object(l.j)(Object(l.l)(t.value||0,t.unit_price||0),Object(l.l)(t.mnum_value||0,t.price||0))),this.$store.commit("setcarts",this.carts),this.totalPrice=this.changetotalPrice()},changeMnumValue:function(t,e,a){var s=a.target.value||0;if(0==e?(-1!=t.mnum_value.toString().indexOf(".")&&n()("该商品只能输入整数"),t.mnum_value=parseInt(s.toString().replace(/[^\d]+/g,""))||0):t.mnum_value=parseFloat(s.toString().match(/\d+(\.\d{0,2})?/)?s.toString().match(/\d+(\.\d{0,2})?/)[0]:"")||0,Object(l.f)(t.value)&&Object(l.f)(t.mnum_value))n()("采购数量不能为空"),t.mnum_value=1;else{var i=Object(l.m)(parseFloat(t.mnum_value)||0,parseFloat(t.equation_factor)),c=parseInt(Object(l.k)(t.mnum_value||0,t.equation_factor));c>=1&&(t.mnum_value=1==e?i:parseInt(i),t.value=parseInt(t.value)+c),t.totalPrice=Object(l.o)(Object(l.j)(Object(l.l)(t.value||0,t.unit_price||0),Object(l.l)(t.mnum_value||0,t.price||0))),this.$store.commit("setcarts",this.carts)}t.totalPrice=Object(l.o)(Object(l.j)(Object(l.l)(t.value||0,t.unit_price||0),Object(l.l)(t.mnum_value||0,t.price||0))),this.$store.commit("setcarts",this.carts),this.totalPrice=this.changetotalPrice()},decreaseCart:function(t,e){if(1==this.$store.state.carts[e].value)return n()({message:"受不了啦,宝贝不能再减少啦",duration:1e3}),!1;this.$store.commit("reduce",e),t.value=this.$store.state.carts[e].value,t.rank_price=this.$store.state.carts[e].rank_price},submitOrder:function(){var t=!0;if(this.carts.map(function(e,a){e.checked&&e.value*e.equation_factor*1+1*e.mnum_value>e.qty&&(t=!1)}),this.checkedLen=this.carts.filter(function(t){return t.checked}).length,0==this.checkedLen)return n()({message:"您还未勾选商品",duration:1e3}),!1;if(t){var e=this.carts.filter(function(t){return 0!=t.checked});this.$store.commit("setcarts",this.carts),this.$store.commit("orders",e),this.$router.push({path:"/confirmOrder"})}else{e=this.carts.filter(function(t){return 0!=t.checked});this.$store.commit("setcarts",this.carts),this.$store.commit("orders",e),this.$router.push({path:"/confirmOrder"})}}}}),v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cards"},[s("div",{staticClass:"header"},[s("mt-header",{attrs:{title:"采购单"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"}),t._v(" "),0==t.isShow?s("mt-button",{attrs:{slot:"right",icon:""},on:{click:t.editor},slot:"right"},[s("span",{staticClass:"headBtn"},[t._v("编辑")])]):s("mt-button",{attrs:{slot:"right",icon:""},on:{click:t.finish},slot:"right"},[s("span",{staticClass:"headBtn"},[t._v("完成")])])],1)],1),t._v(" "),s("div",{staticClass:"my-content"},[s("div",{staticClass:"classify-item"},[s("router-link",{staticClass:"link-counps",attrs:{to:{path:"/couponsCenter"}}},[t._v("领取优惠券")]),t._v(" "),s("router-link",{staticClass:"goClassify",attrs:{to:{path:"/classify"}}},[t._v("再逛逛")])],1),t._v(" "),s("ul",{staticClass:"goods-list"},t._l(t.carts,function(e,a){return s("li",{key:a},[s("div",{staticClass:"mui-input-row car-info mui-checkbox mui-left"},[s("input",{staticClass:"checked",attrs:{name:"checkbox",type:"checkbox"},domProps:{checked:e.checked},on:{click:function(e){t.changeCheckOne(a)}}}),t._v(" "),s("mt-cell-swipe",{attrs:{right:[{content:"删除",style:{background:"#ff7900",color:"#fff"},handler:function(){t.delHandle(a)}}]}},[s("a",{staticStyle:{width:"100%"},attrs:{href:"javascript:;"}},[s("div",{staticClass:"food-link"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+e.img_path,expression:"baseurl+car.img_path"}],key:e.img_path,staticStyle:{float:"left",width:"50px",height:"50px",margin:"0"}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"N"==e.is_enable,expression:"car.is_enable == 'N'"}],staticClass:"is_enable"},[t._v("已下架")]),t._v(" "),s("router-link",{staticClass:"recommend",attrs:{to:{path:"/detail",query:{id:e.id}},tag:"div"}},[s("h4",{staticClass:"skuName"},[t._v(t._s(e.sku_name))]),t._v(" "),s("p",{staticClass:"styleno"},[t._v("规格："+t._s(e.styleno))]),t._v(" "),e.full_gift&&2!=e.full_gift.requireType?s("span",{staticClass:"tag"},[t._v("满赠")]):e.full_gift&&2==e.full_gift.requireType?s("span",{staticClass:"tag"},[t._v("满减")]):t._e(),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:4!=t.shopType,expression:"shopType!=4"}],staticStyle:{color:"#e75b5a",fontSize:"12px"}},[t._v("会员价：")]),t._v(" "),s("div",{staticClass:"price"},[s("span",[s("span",{staticStyle:{color:"#e75b5a",fontSize:"14px"}},[t._v("￥"+t._s(e.unit_price)+"/"+t._s(e.unit))]),t._v(" "),s("span",{staticClass:"retail_price"},[t._v("(￥"+t._s(e.price||"--")+"/"+t._s(e.uom_default)+")")])])])]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper"},[1==e.sku_type?s("div",{staticClass:"countcontrol"},[1!=e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"car.value"}],staticClass:"unit-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:e.value},on:{blur:function(a){t.changeValue(e,0,a)},input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}):t._e(),1!=e.equation_factor?s("span",{staticClass:"unit"},[t._v(t._s(e.unit))]):t._e(),t._v(" "),1==e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"car.value"}],staticClass:"unit-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",onpaste:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",oncontextmenu:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''"},domProps:{value:e.value},on:{blur:function(a){t.changeValue(e,1,a)},input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}):t._e(),1==e.equation_factor?s("span",{staticClass:"unit"},[t._v(t._s(e.unit))]):t._e(),t._v(" "),1!=e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.mnum_value,expression:"car.mnum_value"}],staticClass:"uom-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",onpaste:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",oncontextmenu:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''"},domProps:{value:e.mnum_value},on:{blur:function(a){t.changeMnumValue(e,1,a)},input:function(a){a.target.composing||t.$set(e,"mnum_value",a.target.value)}}}):t._e(),1!=e.equation_factor?s("span",{staticClass:"unit"},[t._v(t._s(e.uom_default))]):t._e()]):s("div",{staticClass:"countcontrol"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"car.value"}],staticClass:"unit-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:e.value},on:{blur:function(a){t.changeValue(e,0,a)},input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),s("span",{staticClass:"unit"},[t._v(t._s(e.unit))]),t._v(" "),1!=e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.mnum_value,expression:"car.mnum_value"}],staticClass:"uom-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:e.mnum_value},on:{blur:function(a){t.changeMnumValue(e,0,a)},input:function(a){a.target.composing||t.$set(e,"mnum_value",a.target.value)}}}):t._e(),1!=e.equation_factor?s("span",{staticClass:"uom_default"},[t._v(t._s(e.uom_default))]):t._e()])])],1),t._v(" "),e.full_gift&&0==e.full_gift.requireType?s("div",[0==e.full_gift.unitType?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.handleShow(e.full_gift.require,e.value,e.equation_factor,e.mnum_value),expression:"handleShow(car.full_gift.require, car.value, car.equation_factor, car.mnum_value)"}]},t._l(e.full_gift.productList,function(a,i){return s("div",{key:i,staticClass:"gift-link clearfix"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+a.imagPath,expression:"baseurl+ gift.imagPath"}],key:t.baseurl+a.imagPath,staticStyle:{float:"left",width:"50px",height:"50px",margin:"0"}}),t._v(" "),s("span",{staticClass:"is_gift"},[t._v("赠")]),t._v(" "),s("div",{staticClass:"gift-info"},[s("h4",{staticClass:"skuName"},[t._v(t._s(a.skuName))]),t._v(" "),s("p",{staticClass:"styleno"},[t._v("规格："+t._s(a.styleno))]),t._v(" "),s("span",{staticClass:"gift-num"},[t._v("x "+t._s(t._f("FormatGift")(a.requirement,e))+"\n                                                    "),t._v(" "),0==a.unitType?s("em",[t._v(t._s(a.uomDefault))]):s("em",[t._v(t._s(a.unit))])])])])}),0)]):s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:parseFloat(e.full_gift.require)<=parseFloat(e.value),expression:"parseFloat(car.full_gift.require) <= parseFloat(car.value)"}]},t._l(e.full_gift.productList,function(a,i){return s("div",{key:i,staticClass:"gift-link clearfix"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+a.imagPath,expression:"baseurl+ gift.imagPath"}],key:t.baseurl+a.imagPath,staticStyle:{float:"left",width:"50px",height:"50px",margin:"0"}}),t._v(" "),s("span",{staticClass:"is_gift"},[t._v("赠")]),t._v(" "),s("div",{staticClass:"gift-info"},[s("h4",{staticClass:"skuName"},[t._v(t._s(a.skuName))]),t._v(" "),s("p",{staticClass:"styleno"},[t._v("规格："+t._s(a.styleno))]),t._v(" "),s("span",{staticClass:"gift-num"},[t._v("x "+t._s(t._f("FormatGift")(a.requirement,e))+"\n                                                    "),t._v(" "),0==a.unitType?s("em",[t._v(t._s(a.uomDefault))]):s("em",[t._v(t._s(a.unit))])])])])}),0)])]):e.full_gift&&1==e.full_gift.requireType?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:parseFloat(e.full_gift.require)<=parseFloat(e.totalPrice),expression:"parseFloat(car.full_gift.require) <= parseFloat(car.totalPrice)"}]},t._l(e.full_gift.productList,function(a,i){return s("div",{key:i,staticClass:"gift-link clearfix"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+a.imagPath,expression:"baseurl + gift.imagPath"}],key:t.baseurl+a.imagPath,staticStyle:{float:"left",width:"50px",height:"50px",margin:"0"}}),t._v(" "),s("span",{staticClass:"is_gift"},[t._v("赠")]),t._v(" "),s("div",{staticClass:"gift-info"},[s("h4",{staticClass:"skuName"},[t._v(t._s(a.skuName))]),t._v(" "),s("p",{staticClass:"styleno"},[t._v("规格："+t._s(a.styleno))]),t._v(" "),s("span",{staticClass:"gift-num"},[t._v("x "+t._s(t._f("FormatGift")(a.requirement,e))+"\n                                                "),t._v(" "),0==a.unitType?s("em",[t._v(t._s(a.uomDefault))]):s("em",[t._v(t._s(a.unit))])])])])}),0)]):e.full_gift&&2==e.full_gift.requireType?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:parseFloat(e.full_gift.require)<=parseFloat(e.totalPrice),expression:"parseFloat(car.full_gift.require) <= parseFloat(car.totalPrice)"}]},[s("div",{staticClass:"gift-link clearfix",staticStyle:{padding:"4px 0 0 0"}},[s("span",{staticClass:"mui-pull-left span_tip"},[t._v("满"+t._s(e.full_gift.require)+"元减"+t._s(e.full_gift.rductionAmount)+"元")]),t._v(" "),s("span",{staticClass:"mui-pull-right span_tip"},[t._v("可减：￥"+t._s(t._f("FormatAmount")(e.full_gift.rductionAmount,e.full_gift.require,e.totalPrice)))])])])]):t._e()])])],1)])}),0),t._v(" "),t.outcarts&&t.outcarts.length>0?s("ul",{staticClass:"goods-list mt-10"},[s("div",{staticClass:"outProduct"},[s("h4",{staticClass:"out-title"},[t._v("已下架产品")]),t._v(" "),s("button",{staticClass:"clearOut",attrs:{type:"button"},on:{click:t.clearOut}},[t._v("清空下架产品")])]),t._v(" "),t._l(t.outcarts,function(e,a){return s("li",{key:a},[s("div",{staticClass:"mui-input-row car-info mui-checkbox mui-left"},[s("input",{staticClass:"checked",attrs:{name:"checkbox",type:"checkbox",disabled:""},domProps:{checked:e.checked}}),t._v(" "),s("mt-cell-swipe",{attrs:{right:[{content:"删除",style:{background:"#ff7900",color:"#fff"},handler:function(){t.delHandle(a)}}]}},[s("router-link",{staticStyle:{width:"100%"},attrs:{to:{path:"/detail",query:{id:e.id}}}},[s("div",{staticClass:"food-link"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+e.img_path,expression:"baseurl+car.img_path"}],key:e.img_path}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"N"==e.is_enable,expression:"car.is_enable == 'N'"}],staticClass:"is_enable"},[t._v("已下架")]),t._v(" "),s("div",{staticClass:"recommend",staticStyle:{"margin-left":"0px"}},[s("h4",{staticClass:"skuName"},[t._v(t._s(e.sku_name))]),t._v(" "),s("p",{staticClass:"styleno"},[t._v("规格："+t._s(e.styleno))]),t._v(" "),s("span",{staticClass:"price"},[t._v("￥"+t._s(e.unit_price)+"/"+t._s(e.unit)),"Y"==e.retail_flag?s("span",{staticClass:"retail_price"},[t._v("(￥"+t._s(e.price||"--")+"/"+t._s(e.uom_default)+")")]):t._e()])])])]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper"},[1==e.sku_type?s("div",{staticClass:"countcontrol"},[1!=e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"car.value"}],staticClass:"unit-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:e.value},on:{blur:function(a){t.changeValue(e,0,a)},input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}):t._e(),1!=e.equation_factor?s("span",{staticClass:"unit"},[t._v(t._s(e.unit))]):t._e(),t._v(" "),1==e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"car.value"}],staticClass:"unit-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",onpaste:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",oncontextmenu:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''"},domProps:{value:e.value},on:{blur:function(a){t.changeValue(e,1,a)},input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}):t._e(),1==e.equation_factor?s("span",{staticClass:"unit"},[t._v(t._s(e.unit))]):t._e(),t._v(" "),1!=e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.mnum_value,expression:"car.mnum_value"}],staticClass:"uom-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",onpaste:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''",oncontextmenu:"value=value.match(/\\d+(\\.\\d{0,2})?/) ? value.match(/\\d+(\\.\\d{0,2})?/)[0] : ''"},domProps:{value:e.mnum_value},on:{blur:function(a){t.changeMnumValue(e,1,a)},input:function(a){a.target.composing||t.$set(e,"mnum_value",a.target.value)}}}):t._e(),1!=e.equation_factor?s("span",{staticClass:"unit"},[t._v(t._s(e.uom_default))]):t._e()]):s("div",{staticClass:"countcontrol"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"car.value"}],staticClass:"unit-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:e.value},on:{blur:function(a){t.changeValue(e,0,a)},input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),s("span",{staticClass:"unit"},[t._v(t._s(e.unit))]),t._v(" "),1!=e.equation_factor?s("input",{directives:[{name:"model",rawName:"v-model",value:e.mnum_value,expression:"car.mnum_value"}],staticClass:"uom-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:e.mnum_value},on:{blur:function(a){t.changeMnumValue(e,0,a)},input:function(a){a.target.composing||t.$set(e,"mnum_value",a.target.value)}}}):t._e(),1!=e.equation_factor?s("span",{staticClass:"uom_default"},[t._v(t._s(e.uom_default))]):t._e()])])],1)],1)])})],2):t._e()]),t._v(" "),t.carts.length?t._e():s("div",{staticClass:"gwc"},[s("div",{staticClass:"gwc_imgs"},[s("img",{staticClass:"no-img",attrs:{src:a("MYVL")}}),t._v(" "),s("div",{staticClass:"go",on:{click:t.go}},[t._v("去逛逛")])])]),t._v(" "),s("div",{staticClass:"shop-toolbar mui-input-row mui-checkbox mui-left"},[s("label",[t._v("全选\n            "),s("span",{directives:[{name:"show",rawName:"v-show",value:0==t.isShow,expression:"isShow==false"}],staticClass:"total"},[s("em",[t._v("合计：")]),t._v(" "),s("span",{staticClass:"tip-text"},[t._v("￥"+t._s(t._f("toFixed2")(t.totalPrice)))])])]),t._v(" "),s("input",{attrs:{name:"checkbox",type:"checkbox"},domProps:{checked:t.checkAll},on:{click:t.changeCheckAll}}),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:0==t.isShow&&0!=t.checkedCount,expression:"isShow==false && checkedCount!=0"}],staticClass:"mui-btn",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.submitOrder(e)}}},[t._v("下单")]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:0==t.isShow&&0==t.checkedCount,expression:"isShow==false && checkedCount==0"}],staticClass:"mui-btn",attrs:{type:"button",disabled:""}},[t._v("下单")]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:1==t.isShow,expression:"isShow==true"}],staticClass:"mui-btn collect-btn",staticStyle:{"border-right":"2px solid #fff"},attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.collect(e)}}},[t._v("加入收藏")]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:1==t.isShow,expression:"isShow==true"}],staticClass:"mui-btn clear-btn",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.clear(e)}}},[t._v("删除")])]),t._v(" "),s("Tabbar",{attrs:{selected:t.selected}})],1)},staticRenderFns:[]};var m=a("VU/8")(u,v,!1,function(t){a("sQfv")},"data-v-9bfd308c",null);e.default=m.exports},MYVL:function(t,e,a){t.exports=a.p+"static/img/no-order.d6cb2ab.png"},sQfv:function(t,e){}});