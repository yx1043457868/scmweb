webpackJsonp([22],{"/Nem":function(t,e){},"b+s+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),o=s.n(i),a=(s("34+y"),s("X+yh")),n=s.n(a),c=s("teIl"),l=s("0xDb"),r={components:{Header:c.a},data:function(){return{obj:{shopName:this.$store.getters.shop.shop_name,contactName:"",contactPhone:"",province:"",city:"",address:"",classCode:"",classThird:"",contactSex:"",positionName:"",positionValue:"",blisCode:"",CompanyList:[],companyCode:"0"},popupVisible:!1,provinceList:[],cityList:[],customer:[],dataList:[{flex:1,values:[],className:"slot1",textAlign:"center",valueKey:0}],handler:function(t){t.preventDefault()}}},watch:{popupVisible:function(t){t?this.closeTouch():this.openTouch()}},mounted:function(){},created:function(){this.initProvinceList(),this.getPosition(),this.getCustomer(),this.initCompanyList()},computed:{classListTwo:function(){return this.customer.filter(function(t){return 2==t.parentid})},classListThree:function(){var t=this.obj.classCode;return this.obj.classThird="",this.customer.filter(function(e,s){return e.parentid==t&&0!=e.parentid})},thirdName:function(){var t=this.obj.classThird,e=this.classListThree.findIndex(function(e,s){return t==e.id});return-1===e||void 0==e?"":this.classListThree[e].name},className:function(){var t=this,e=this.classListTwo.findIndex(function(e){return e.itemId==t.obj.classCode});return-1===e||null==e||void 0==e?"":this.classListTwo[e].name}},methods:{closeTouch:function(){document.getElementsByTagName("body")[0].addEventListener("touchmove",this.handler,{passive:!1})},openTouch:function(){document.getElementsByTagName("body")[0].removeEventListener("touchmove",this.handler,{passive:!1})},initCustomer:function(){var t="{'shopId':'"+this.$store.getters.account.shopId+"'}";this.$post("/mobileShop/shopView.do",{content:t,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){console.log(t)})},contact:function(t,e){var s=this;if(t){var i="{'account':'"+t+"'}";this.$post("/appAccount/checkAccount.do",{content:i,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){"yes"==JSON.parse(t).optFlag||(1==e?n()("账户名已存在"):(n()("手机号已注册"),s.obj.contactPhone=""))})}},contactPhone1:function(t,e){var s=this;if(t){if(!Object(l.g)(t))return this.obj.contactPhone="",n()({message:"手机号格式不正确",duration:800}),!1;var i="{'phone':'"+t+"'}";this.$post("/appAccount/checkPhone.do",{content:i,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){"yes"==JSON.parse(t).optFlag||(n()("手机号已存在"),s.obj.contactPhone="")})}},positonConfirm:function(){this.popupVisible=!1,this.obj.positionName=this.$refs.picker.getValues()[0].name,this.obj.positionValue=this.$refs.picker.getValues()[0].value},getPosition:function(){var t=this,e="{'owner':'"+this.$store.getters.company.owner+"'}";this.$post("/appAccount/checkPosition.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var s=JSON.parse(e);if("yes"==s.optFlag){var i=[];s.res.forEach(function(t,e){var s={name:t.pos_name,value:t.pos_code};i.push(s)}),t.dataList[0].values=i}else n()(s.optDesc)})},getCustomer:function(){var t=this,e="{'owner':'"+this.$store.getters.company.owner+"'}";this.$post("/mobileShop/shopTypeTree.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var s=JSON.parse(e);"yes"==s.optFlag?t.customer=s.res:n()({message:"获取客户失败",duration:800})})},initProvinceList:function(){var t=this,e="{'company_id':'"+this.$store.getters.account.companyId+"'}";this.$post("/appRegister/provinceList.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var s=JSON.parse(e);"yes"==s.optFlag?t.provinceList=s.res:n()(s.optDesc)})},initCompanyList:function(){var t=this;this.$post("/mobileShop/getCityParentCompanyList.do",{}).then(function(e){var s=JSON.parse(e);"yes"==s.optFlag?s.res&&s.res.map(function(e,s){1==e.isUse&&t.obj.CompanyList.push(e)}):n()(s.optDesc)})},loadCity:function(t){var e=this,s="{'parentid':'"+t+"'}";this.obj.province=t,this.$post("/appRegister/cityList.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var s=JSON.parse(t);"yes"==s.optFlag?(e.cityList=s.res,e.cityList.length>0?e.obj.city=e.cityList[0].id:e.obj.city=""):n()(s.optDesc)})},checkTel:function(t){return/^0\d{2,3}-?\d{7,8}$/.test(t)},submit:function(){var t=this;if(""==this.obj.shopName)return n()({message:"请输入客户名称",duration:800}),!1;if(""==this.obj.classCode)return n()({message:"请选择经营类型",duration:800}),!1;if(""!=this.obj.classCode&&this.classListThree.length>0&&""==this.obj.classThird)return n()({message:"请选择二级经营类型",duration:800}),!1;if(""==this.obj.province)return n()({message:"请输入区域",duration:800}),!1;if(""==this.obj.address)return n()({message:"请输入经营地址",duration:800}),!1;if(""==this.obj.contactName)return n()({message:"请输入联系人名称",duration:800}),!1;if(""==this.obj.contactSex)return n()({message:"请选择联系人性别",duration:800}),!1;if(""==this.obj.positionValue)return n()({message:"请选择联系人职位",duration:800}),!1;if(""==this.obj.contactPhone)return n()({message:"请输入联系电话",duration:800}),!1;if(""==this.obj.blisCode)return n()({message:"请输入营业执照号码",duration:800}),!1;if(""==this.obj.blisNm)return n()({message:"请输入营业执照名称",duration:800}),!1;var e=this.$store.getters.account,s={shopVo:{shopName:this.obj.shopName,contactName:this.obj.contactName,contactPhone:this.obj.contactPhone,address:this.obj.address,className:this.className,classCode:this.obj.classCode,classThird:this.obj.classThird,thirdName:this.thirdName,province:this.obj.province,id:e.shopId,city:this.obj.city},shopDocVo:{blisCode:this.obj.blisCode,blisNm:this.obj.blisNm},positionCode:this.obj.positionValue,positionName:this.obj.positionName,contactSex:this.obj.contactSex,accountId:e.id},i=o()(s);this.$post("/mobileShop/applyShop.do",{content:i,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var s=JSON.parse(e);"yes"==s.optFlag?(n()("感谢您的信任，信息已提交，良之隆将尽快进行审核"),setTimeout(function(){t.$router.back(-1)},1e3)):n()(s.optDesc)})}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Header",{attrs:{title:"申请会员"}}),t._v(" "),s("div",{staticClass:"my-content"},[s("form",{staticClass:"form-wrapper"},[s("mt-field",{attrs:{label:"名称(企业/个人)",placeholder:"请输入客户名称(必填)"},model:{value:t.obj.shopName,callback:function(e){t.$set(t.obj,"shopName",e)},expression:"obj.shopName"}},[s("span",{staticClass:"red"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"mint-cell mint-field"},[s("div",{staticClass:"mint-cell-left"}),t._v(" "),s("div",{staticClass:"mint-cell-wrapper"},[t._m(0),t._v(" "),s("div",{staticClass:"mint-cell-value"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.obj.classCode,expression:"obj.classCode"}],staticClass:"required selectPadding",attrs:{name:"classTwo",id:"classTwo"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.obj,"classCode",e.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),t._v(" "),t._l(t.classListTwo,function(e,i){return s("option",{key:i,domProps:{value:e.itemId}},[t._v(t._s(e.name))])})],2),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.obj.classThird,expression:"obj.classThird"},{name:"show",rawName:"v-show",value:t.classListThree&&t.classListThree.length>0,expression:"classListThree && classListThree.length>0"}],staticClass:"selectPadding",attrs:{name:"classThree",id:"classThree"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.obj,"classThird",e.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),t._v(" "),t._l(t.classListThree,function(e,i){return s("option",{key:i,domProps:{value:e.itemId}},[t._v(t._s(e.name))])})],2),t._v(" "),t._m(1)])])]),t._v(" "),s("div",{staticClass:"mint-cell mint-field",attrs:{state:"warning"}},[s("div",{staticClass:"mint-cell-left"}),t._v(" "),s("div",{staticClass:"mint-cell-wrapper"},[t._m(2),t._v(" "),s("div",{staticClass:"mint-cell-value"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.obj.province,expression:"obj.province"}],staticClass:"required",attrs:{name:"province",id:"province"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.obj,"province",e.target.multiple?s:s[0])},function(e){t.loadCity(t.obj.province)}]}},[s("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),t._v(" "),t._l(t.provinceList,function(e,i){return s("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.obj.city,expression:"obj.city"},{name:"show",rawName:"v-show",value:t.cityList&&t.cityList.length>0,expression:"cityList && cityList.length > 0"}],attrs:{name:"city",id:"city"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.obj,"city",e.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),t._v(" "),t._l(t.cityList,function(e,i){return s("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),t._m(3)])])]),t._v(" "),s("mt-field",{attrs:{label:"经营地址",placeholder:"请输入经营地址(必填)"},model:{value:t.obj.address,callback:function(e){t.$set(t.obj,"address",e)},expression:"obj.address"}},[s("span",{staticClass:"red"},[t._v("*")])]),t._v(" "),s("mt-field",{attrs:{label:"联系人名称",placeholder:"请输入联系人(必填)"},model:{value:t.obj.contactName,callback:function(e){t.$set(t.obj,"contactName",e)},expression:"obj.contactName"}},[s("span",{staticClass:"red"},[t._v("*")])]),t._v(" "),s("a",{staticClass:"mint-cell mint-field"},[s("div",{staticClass:"mint-cell-wrapper radio-cell"},[t._m(4),t._v(" "),s("div",{staticClass:"mint-cell-value"},[s("div",{staticClass:"mui-row"},[s("div",{staticClass:"mui-radio mui-left select-radio mui-col-xs-4"},[s("label",[t._v("男")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.obj.contactSex,expression:"obj.contactSex"}],attrs:{name:"contactSex",type:"radio",value:"01"},domProps:{checked:t._q(t.obj.contactSex,"01")},on:{change:function(e){t.$set(t.obj,"contactSex","01")}}})]),t._v(" "),s("div",{staticClass:"mui-radio mui-left select-radio mui-col-xs-4"},[s("label",[t._v("女")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.obj.contactSex,expression:"obj.contactSex"}],attrs:{name:"contactSex",type:"radio",value:"02"},domProps:{checked:t._q(t.obj.contactSex,"02")},on:{change:function(e){t.$set(t.obj,"contactSex","02")}}})])]),t._v(" "),t._m(5)])])]),t._v(" "),s("mt-field",{attrs:{label:"联系人职位",placeholder:"请选择联系人职位(必选)",readonly:!0},nativeOn:{"!focus":function(e){t.popupVisible=!0}},model:{value:t.obj.positionName,callback:function(e){t.$set(t.obj,"positionName",e)},expression:"obj.positionName"}},[s("span",{staticClass:"red"},[t._v("*")])]),t._v(" "),s("mt-field",{attrs:{label:"联系人电话",placeholder:"请输入联系人电话(必填)"},nativeOn:{"!blur":function(e){t.contactPhone1(t.obj.contactPhone,2)}},model:{value:t.obj.contactPhone,callback:function(e){t.$set(t.obj,"contactPhone",e)},expression:"obj.contactPhone"}},[s("span",{staticClass:"red"},[t._v("*")])]),t._v(" "),s("a",{staticClass:"mint-cell mint-field"},[s("div",{staticClass:"mint-cell-wrapper"},[t._m(6),t._v(" "),s("div",{staticClass:"mint-cell-value"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.obj.blisCode,expression:"obj.blisCode"}],staticClass:"mint-field-core",attrs:{placeholder:"请输入营业执照号码(必填)",type:"text",onkeyup:"value=value.replace(/[^0-9a-zA-Z]/g,'')",onpaste:"value=value.replace(/[^0-9a-zA-Z]/g,'')",oncontextmenu:"value=value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:t.obj.blisCode},on:{input:function(e){e.target.composing||t.$set(t.obj,"blisCode",e.target.value)}}}),t._v(" "),t._m(7)])])]),t._v(" "),s("a",{staticClass:"mint-cell mint-field"},[s("div",{staticClass:"mint-cell-wrapper"},[t._m(8),t._v(" "),s("div",{staticClass:"mint-cell-value"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.obj.blisNm,expression:"obj.blisNm"}],staticClass:"mint-field-core",attrs:{placeholder:"请输入营业执照名称(必填)",type:"text"},domProps:{value:t.obj.blisNm},on:{input:function(e){e.target.composing||t.$set(t.obj,"blisNm",e.target.value)}}}),t._v(" "),t._m(9)])])])],1),t._v(" "),s("div",{staticClass:"bottom-btn",on:{click:function(e){return e.stopPropagation(),t.submit(e)}}},[s("button",{staticClass:"def-btn",attrs:{type:"button"}},[t._v("提交")])]),t._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"dialogMask",attrs:{id:"dialogMask"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"picker-view"},[s("mt-picker",{ref:"picker",attrs:{slots:t.dataList,"visible-item-count":5,"show-toolbar":!0,valueKey:"name"}},[s("span",{staticClass:"mint-datetime-action mint-datetime-cancel",on:{click:function(e){t.popupVisible=!1}}},[t._v("取消")]),t._v(" "),s("span",{staticClass:"mint-datetime-action mint-datetime-confirm",on:{click:t.positonConfirm}},[t._v("确定")])])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("经营类型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-field-other"},[e("span",{staticClass:"red",attrs:{"data-v-7c0b8970":""}},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("区域")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-field-other"},[e("span",{staticClass:"red",attrs:{"data-v-7c0b8970":""}},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("联系人性别")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-field-other"},[e("span",{staticClass:"red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("营业执照号码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-field-other"},[e("span",{staticClass:"red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("营业执照名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-field-other"},[e("span",{staticClass:"red"},[this._v("*")])])}]};var d=s("VU/8")(r,u,!1,function(t){s("/Nem")},"data-v-c8900db2",null);e.default=d.exports}});