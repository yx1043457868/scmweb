webpackJsonp([55],{INMH:function(t,e){},fveE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("PBmY");var a=s("I4Nl"),o=s.n(a),i=(s("yvAY"),s("fc0N")),r=s.n(i),n=(s("teIl"),s("w8Xk")),c=s.n(n),l=(s("t4A4"),{data:function(){return{orderList:[],choices:[{choice:"全部订单",value:""},{choice:"待审核订单",value:"8,9"},{choice:"待配送订单",value:"1,8,9"},{choice:"配送中订单",value:"2"},{choice:"已签收订单",value:"3"},{choice:"已取消订单",value:"4"}],mescroll:null,searchTx:"",stateId:"",isActive:"",orderTitle:"全部订单",login_info:{},nopay:"",companyObj:"",accountObj:"",show:!1}},mounted:function(){this.mescroll=new c.a("mescroll",{down:{auto:!1,callback:this.downCallback},up:{auto:!0,callback:this.upCallback,isBounce:!0,empty:{warpId:"goods-ul",icon:"static/images/none.png",tip:"亲,暂无相关数据哦~"}}})},created:function(){var t=this.$route.query.typeId;if(this.accountObj=this.$store.getters.account?this.$store.getters.account:{},this.companyObj=this.$store.getters.company?this.$store.getters.company:{},t){if("1,8,9"==t)return this.orderTitle="待配送订单",void(this.isActive=2);"8,9"==t?(this.stateId="",this.nopay="no",this.orderTitle="待付款订单",this.isActive=1):(this.stateId=t,"1"==t?(this.orderTitle="待配送订单",this.isActive=2):"2"==t?(this.orderTitle="配送中订单",this.isActive=3):"3"==t?(this.orderTitle="已签收订单",this.isActive=4):"4"==t&&(this.orderTitle="已取消订单",this.isActive=5))}},methods:{pay:function(t){window.location.href=location.origin+"/pay?orderCode="+t},back:function(){this.$router.back(-1)},goToDec:function(t,e){this.$router.push({path:"/refundInfo",query:{id:t,tab:e}})},sureOrder:function(t){this.$router.push({path:"/orderConfirm",query:{orderCode:t,groupCode:t}})},cancelOrder:function(t,e){var s=this,a=this;r.a.confirm("确定取消吗?").then(function(i){if("confirm"==i){var r=a.companyObj.owner,n=a.accountObj.account,c="{'orderCode':'"+t+"','account':'"+n+"','owner':'"+r+"'}";a.$post("/appOrder/cancelOrder.do",{content:c,version:"kkllo",login_token:s.$store.getters.logintoken}).then(function(t){var s=JSON.parse(t);"yes"==s.optFlag?(o()({message:"订单取消成功",duration:950}),a.orderList[e].handleStatus="4"):o()({message:s.optDesc,duration:950})}).catch(function(t){console.log(t)})}}).catch(function(){})},isWeixinBrowser:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},search:function(){var t=this.searchTx.trim();t&&(this.searchTx=t,this.mescroll.resetUpScroll())},downCallback:function(){this.mescroll.resetUpScroll()},upCallback:function(t){var e=this;1==t.num&&(e.orderList=[]),this.$nextTick(function(){e.getListDataFromNet(e.stateId,e.searchTx,e.nopay,t.num,t.size,function(s){e.orderList=e.orderList.concat(s),console.log("page.num="+t.num+", page.size="+t.size+", curPageData.length="+s.length+", self.orderList.length=="+e.orderList.length),e.mescroll.endSuccess(s.length)},function(){e.mescroll.endErr()})})},chosen:function(t,e,s){this.isActive=t,this.searchTx="",this.stateId=e,this.orderTitle=s,this.mescroll.resetUpScroll(),this.show=!this.show},getListDataFromNet:function(t,e,s,a,i,r,n){var c=this;setTimeout(function(){try{var l=[];if(c.accountObj){var u='{"account": "'+c.accountObj.account+'","shopId":"'+c.accountObj.shopId+'", "searchContent":"'+e+'", "nopay":"'+s+'","handleStatus": "'+t+'","pageSize": "'+i+'","pageNo": "'+a+'"}';0==a?c.$post("/appVpOrder/orderList.do",{content:u,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(t){if("yes"==t.data.optFlag)for(var e=t.data.res.orders,s=0,a=e.length;s<a;s++)l.push(e[s]);else n&&n();r&&r(l)}).catch(function(t){console.log(t)}):c.$post("/appVpOrder/orderList.do",{content:u,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(t){var e=JSON.parse(t);if("yes"==e.optFlag)for(var s=e.res.orders,a=0,i=s.length;a<i;a++)l.push(s[a]);else o()({message:e.optDesc,duration:950}),n&&n();r&&r(l)}).catch(function(t){console.log(t)})}}catch(t){n&&n()}},1e3)}}}),u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"header"},[s("mt-header",{attrs:{title:"退货单"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.back(1)}},slot:"left"})],1)],1),t._v(" "),s("section",{attrs:{id:"order"}},[t.show?s("div",{staticClass:"nav_show",attrs:{id:"popover"}},[s("ul",{staticClass:"mui-table-view"},t._l(t.choices,function(e,a){return s("li",{key:a,class:{select:a==t.isActive},attrs:{value:e.value},on:{click:function(s){return t.chosen(a,e.value,e.choice)}}},[t._v(t._s(e.choice)+"\n                    ")])}),0)]):t._e(),t._v(" "),s("div",{staticClass:"mui-content"},[s("div",{staticClass:"mescroll",attrs:{id:"mescroll"}},[s("div",{staticClass:"mescroll-bounce"},[s("div",{staticClass:"order-wrapper"},[s("ul",{staticClass:"mui-table-view",attrs:{id:"goods-ul"}},t._l(t.orderList,function(e,a){return s("li",{key:a,staticClass:"mui-table-view-cell order-list",attrs:{wm_code:e.wm_code,"data-name":e.shop_name}},[s("div",{staticClass:"order-header clearfix"},[s("span",{staticClass:"mui-pull-left"},[t._v("\n                                            订单号:"+t._s(e.orderCode))]),t._v(" "),s("span",{staticClass:"orderSt mui-pull-right"},[1==e.handleStatus?s("em",{staticClass:"blue"},[t._v("待配送")]):2==e.handleStatus?s("em",{staticClass:"blue"},[t._v("配送中")]):3==e.handleStatus?s("em",{staticClass:"green"},[t._v("已签收")]):4==e.handleStatus?s("em",{staticClass:"gray"},[t._v("已取消")]):8==e.handleStatus?s("em",{staticClass:"blue"},[t._v("待审核")]):9==e.handleStatus?s("em",{staticClass:"blue"},[t._v("待审核")]):t._e()])]),t._v(" "),s("div",{staticClass:"order-content"},[s("p",{staticClass:"order-info"},[s("span",{staticClass:"mui-text-left"},[t._v("采购品类："+t._s(e.skuNum))])]),t._v(" "),s("p",{staticClass:"order-info"},[s("span",{staticClass:"mui-pull-left"},[t._v("采购时间："+t._s(e.createTime))])]),t._v(" "),s("p",{staticClass:"order-info"},[s("span",{staticClass:"mui-pull-left"},[t._v("订单价：\n                                                "),s("i",{staticStyle:{color:"#ff671d"}},[t._v("¥"+t._s(e.sumAmount))])])]),t._v(" "),"1"==e.payStatus?s("div",{staticClass:"payed"}):s("div",{staticClass:"unpayed"})]),t._v(" "),s("div",{staticClass:"order-footer hand_details"},[s("div",{staticClass:"state_btn clearfix"},[1==e.handleStatus||8==e.handleStatus||9==e.handleStatus?s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.cancelOrder(e.orderCode,a)}}},[s("span",[t._v("取消订单")])]):t._e(),t._v(" "),2==e.handleStatus?s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.sureOrder(e.orderCode)}}},[s("span",[t._v("确认收货")])]):t._e(),t._v(" "),"4"!=e.handleStatus&&"1"!=e.payStatus?s("button",{staticClass:"mui-btn",on:{click:function(s){return t.pay(e.orderCode)}}},[t._v("\n                                                立即支付\n                                            ")]):t._e(),t._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.goToDec(e.orderCode,0)}}},[s("span",[t._v("查看详情")])])])])])}),0)])])])])])])},staticRenderFns:[]};var d=s("C7Lr")(l,u,!1,function(t){s("INMH")},"data-v-2b12d36c",null);e.default=d.exports}});