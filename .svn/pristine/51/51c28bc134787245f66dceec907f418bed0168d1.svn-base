webpackJsonp([41],{"0WLf":function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("OgVB");var i=e("/Lyv"),a=e.n(i),o=(e("34+y"),e("X+yh")),c=e.n(o),n=e("teIl"),d=e("Jovq"),r=e("0xDb"),l={name:"confirmSimple",components:{Header:n.a,LogisticsItem:d.a},data:function(){return{accountPhone:this.$store.getters.company.contactPhone?this.$store.getters.company.contactPhone:"",accountRealName:this.$store.getters.company.contactName?this.$store.getters.company.contactName:"",orders:this.$store.state.sample,companywm:{},shopPickAdd:{},isShow:!1,shopInfo:{},shopPickName:this.$store.getters.account.account,changShopAddFlag:!1,node:"",mergeFlag:{},selectAddressList:"",orderCode:"",cardShow:!1,payWayShow:!1,choices:[],isActive:"0",picked:"shopPick",payWays:"online",payWayTitle:"先款后货",couponInfo:"",priceSpread:0,couponListY:[],couponListN:[],Y:!0,N:!1,checkedObj:[],checked:"",totalCount:"",tipText:"",tipHandle:"",activeClass:"active",errorClass:"disable",couponSend:"",sendType:"1",minOrderNum:0,dateTime:"",startDate:new Date,exceptedTime:"",orderNum:null,isDisable:!0}},created:function(){this.initAddress(),this.changeAdsByCookie(),0==this.orders.length&&this.$router.push({path:"/"})},mounted:function(){var s=this;this.orders.forEach(function(t,e){s.orderNum+=Number(t.value)})},methods:{blurWatch:function(){window.scroll(0,0)},back:function(){this.$router.back(-1)},openPicker:function(){this.$refs.picker.open()},handleConfirm:function(s){this.exceptedTime=Object(r.b)(s,1)},changeAdsByCookie:function(){var s=this.$store.state.address;this.selectAddressList=null==s||""==s?"":s},initAddress:function(){var s=this,t=this.$store.getters.account,e="{'shopId':'"+t.shopId+"','companyId':'"+t.companyId+"'}";this.$post("/appShippingAddress/appVpShopAddress.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var e=JSON.parse(t);"yes"==e.optFlag?e.shop?(s.shopInfo=e.shop,s.shopPickAdd=e.VpShopAddress,s.isDisable=!1):(s.shopPickAdd=e.VpShopAddress,s.isDisable=!1):s.isDisable=!0})},touchstart:function(){},selectAddress:function(){this.$router.push({path:"/selectAddress"})},editShopPickAdd:function(){this.changShopAddFlag=!0},changShopAddConfig:function(){return""==this.shopPickAdd.address?(c()("自提地址不能为空"),!1):""==this.shopPickName?(c()("自提联系人不能为空"),!1):void(this.changShopAddFlag=!1)},submitOrder:function(){var s=this;if(s.isDisable=!0,"logistics"==this.picked){if(s.selectAddressList){if(Object(r.f)(s.selectAddressList.shopTact)||Object(r.f)(s.selectAddressList.shopTel)||Object(r.f)(s.selectAddressList.address))return a()("提示","请编辑完整的收货地址"),!1}else if(Object(r.f)(s.shopInfo)||Object(r.f)(s.shopInfo.address)||Object(r.f)(s.shopInfo.shopTact)||Object(r.f)(s.shopInfo.shopTel))return a()("提示","请编辑完整的收货地址"),!1}else if(Object(r.f)(s.shopPickAdd)||Object(r.f)(s.shopPickAdd.address)||Object(r.f)(s.shopPickName))return a()("提示","请编辑完整的门店自提地址"),!1;var t,e,i=this.$store.getters.account?this.$store.getters.account:{};e=this.$store.getters.company?this.$store.getters.company:{},t=this.$store.getters.shop?this.$store.getters.shop:{};var o=i.companyId,n=e.owner,d=(t.wm_code,t.id),l=i.account,p=i.account;if("logistics"==this.picked)if(this.sendType="1",s.selectAddressList)var h=s.selectAddressList.shopTact||"",v=s.selectAddressList.shopTel||"",m=s.selectAddressList.province_id||"",u=s.selectAddressList.city_id||"",_=s.selectAddressList.province||"",f=s.selectAddressList.city||"",g=s.selectAddressList.address||"";else h=s.shopInfo.shopTact||"",v=s.shopInfo.shopTel||"",m=s.shopInfo.province_id||"",u=s.shopInfo.city_id||"",_=s.shopInfo.province||"",f=s.shopInfo.city||"",g=s.shopInfo.address||"";else{this.sendType="4";h=s.accountRealName,v=s.accountPhone,m="",u="",_="",f="",g=s.shopPickAdd.address}var C=new Array;s.orders.forEach(function(s,t){var e=[],i=s.giftId||"",a=s.price||0;e.push("'giftId':'"+i+"'"),e.push("'qty':'"+s.value+"'"),e.push("'skuCode':'"+s.sku_code+"'"),e.push("'price':'"+a+"'"),C.push("{"+e.join(",")+"}")});var k="{'companyId': '"+o+"','refType': '1','owner': '"+n+"','shopId': '"+d+"','account': '"+l+"','receiveName': '"+h+"','receivePhone': '"+v+"','shopProvinceCode': '"+m+"','shopCityCode': '"+u+"','shopProvinceName': '"+_+"','shopCityName': '"+f+"','receiveAddress': '"+g+"','skus': ["+C.join(",")+"],'createBy': '"+p+"','exceptedTime': '"+this.exceptedTime+"','sendType': '"+s.sendType+"','note': '"+s.node+"'}";s.$post("/appGift/submitOrder.do",{content:k,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(t){sessionStorage.searchValue="";var e=JSON.parse(t);1==e.flag?(s.$store.commit("clearsample",[]),s.$router.push({path:"/simpleOk",query:{createTime:e.data.createTime,orderCode:e.data.orderCode,index:"01"==i.role?1:i.role}})):(s.isDisable=!1,c()(e.message))}).catch(function(s){console.log(s)})}}},p={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"contaniner_s"},[e("Header",{attrs:{title:"确认申报"}}),s._v(" "),e("div",{staticClass:"my-content order-detail"},[e("LogisticsItem"),s._v(" "),e("ul",{staticClass:"mui-table-view"},[e("li",{staticClass:"mui-table-view-cell confirm-list mui-row"},[e("label",{staticClass:"mui-col-xs-3"},[s._v("取货方式")]),s._v(" "),e("div",{staticClass:"mui-radio mui-left select-logistics mui-col-xs-4"},[e("label",[s._v("门店配送")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.picked,expression:"picked"}],attrs:{name:"select-radio",type:"radio",value:"logistics"},domProps:{checked:s._q(s.picked,"logistics")},on:{change:function(t){s.picked="logistics"}}})]),s._v(" "),e("div",{staticClass:"mui-radio mui-left select-logistics mui-col-xs-4"},[e("label",[s._v("门店自提")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.picked,expression:"picked"}],attrs:{name:"select-radio",type:"radio",value:"shopPick"},domProps:{checked:s._q(s.picked,"shopPick")},on:{change:function(t){s.picked="shopPick"}}})])])]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"logistics"==s.picked,expression:"picked == 'logistics'"}],staticClass:"address-wrapper"},[""!=s.selectAddressList?e("div",{staticClass:"address-info",staticStyle:{"margin-bottom":"10px"},on:{click:s.selectAddress}},[e("i",{staticClass:"iconfont add-icon"},[s._v("")]),s._v(" "),e("div",{staticClass:"add-contact"},[e("h5",{staticClass:"clearfix"},[e("span",{staticClass:"contact-name"},[s._v(s._s(s.selectAddressList&&s.selectAddressList.shopTact?s.selectAddressList.shopTact:"暂无"))]),s._v(" "),e("span",{staticClass:"contact-tel"},[s._v(s._s(s.selectAddressList.shopTel?s.selectAddressList.shopTel:"暂无"))])]),s._v(" "),s.selectAddressList.province==s.selectAddressList.city?e("p",{staticClass:"address"},[s._v("收货地址："+s._s(s.selectAddressList.province)+s._s(s.selectAddressList.address))]):e("p",{staticClass:"address"},[s._v("收货地址："+s._s(s.selectAddressList.province)+s._s(s.selectAddressList.city)+s._s(s.selectAddressList.address))])]),s._v(" "),s._m(0)]):e("div",{staticClass:"address-info",staticStyle:{"margin-bottom":"10px"},on:{click:s.selectAddress}},[e("i",{staticClass:"iconfont add-icon"},[s._v("")]),s._v(" "),s.shopInfo.shopTact&&s.shopInfo.shopTel?e("div",{staticClass:"add-contact"},[e("h5",{staticClass:"clearfix"},[e("span",{staticClass:"contact-name"},[s._v(s._s(s.shopInfo.shopTact))]),s._v(" "),e("span",{staticClass:"contact-tel"},[s._v(s._s(s.shopInfo.shopTel))])]),s._v(" "),s.shopInfo.province==s.shopInfo.city?e("p",{staticClass:"address"},[s._v("收货地址："+s._s(s.shopInfo.province)+s._s(s.shopInfo.address))]):e("p",{staticClass:"address"},[s._v("收货地址："+s._s(s.shopInfo.province)+s._s(s.shopInfo.city)+s._s(s.shopInfo.address))])]):e("div",{staticClass:"add-contact",staticStyle:{height:"36px"}},[s._v("\n                    请编辑收货地址\n                ")]),s._v(" "),s._m(1)])]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"shopPick"==s.picked,expression:"picked == 'shopPick'"}],staticClass:"address-wrapper"},[e("div",{staticClass:"address-info",staticStyle:{"margin-bottom":"10px"}},[e("i",{staticClass:"iconfont add-icon"},[s._v("")]),s._v(" "),e("div",{staticClass:"add-contact"},[e("h5",{staticClass:"clearfix"},[e("span",{staticClass:"contact-name"},[s._v(s._s(s.accountRealName))]),s._v(" "),e("span",{staticClass:"contact-tel"},[s._v(s._s(s.accountPhone))])]),s._v(" "),e("p",{staticClass:"address"},[s._v("自提地址："+s._s(s.shopPickAdd.address))])]),s._v(" "),e("div",{staticClass:"address-r"},[e("router-link",{staticClass:"iconfont you",attrs:{to:{path:"/mapShow",query:{ad:s.shopPickAdd.address}}}},[s._v("")])],1)])]),s._v(" "),e("ul",{staticClass:"mui-table-view goods-list"},[e("div",{staticClass:"total1"},[s._v("商品清单\n                "),e("span",{staticClass:"total_num"},[s._v("总数："+s._s(s.orderNum))])]),s._v(" "),s._l(s.orders,function(t,i){return e("li",{key:i,staticClass:"mui-table-view-cell"},[e("div",{staticClass:"food-link"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.baseurl+t.img_path,expression:"baseurl+food.img_path"}]}),s._v(" "),e("div",{staticClass:"recommend"},[e("h4",{staticClass:"skuName"},[s._v("\n                            "+s._s(t.sku_name)+"\n                        ")]),s._v(" "),e("p",{staticClass:"styleno"},[s._v("规格："+s._s(t.styleno))]),s._v(" "),e("p",{staticClass:"styleno"},[t.rkpriceList?e("span",{staticClass:"tag"},[s._v("以量定价")]):s._e()]),s._v(" "),e("p",{staticClass:"styleno"},[s._v("商品编码："+s._s(t.sku_code))]),s._v(" "),e("span",{staticClass:"blue"},[s._v("×"+s._s(t.value))])])])])})],2),s._v(" "),e("div",{staticClass:"form-wrapper mt-10"},[e("div",{staticClass:"mint-cell",on:{click:s.openPicker}},[e("div",{staticClass:"mint-cell-left"}),s._v(" "),e("div",{staticClass:"mint-cell-wrapper"},[e("div",{staticClass:"mint-cell-title"},[s._v("期望交货时间")]),s._v(" "),e("div",{staticClass:"mint-cell-value is-link"},[e("span",{class:[""!=s.exceptedTime?"active":""]},[s._v(s._s(s.exceptedTime?s.exceptedTime:"请选择期望交货时间"))])]),s._v(" "),e("i",{staticClass:"mint-cell-allow-right"})])]),s._v(" "),e("mt-field",{staticClass:"my-cell",attrs:{label:"买家留言",placeholder:"请输入留言/备注信息（选填）"},model:{value:s.node,callback:function(t){s.node=t},expression:"node"}})],1),s._v(" "),e("mt-datetime-picker",{ref:"picker",attrs:{type:"date","month-format":"{value} 月","date-format":"{value} 日",startDate:s.startDate},on:{confirm:s.handleConfirm}}),s._v(" "),e("div",{staticClass:"bottom-btn",staticStyle:{padding:"0"}},[e("button",{staticClass:"def-btn",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),s.submitOrder(t)}}},[s._v("确认申报")])]),s._v(" "),s.changShopAddFlag?e("div",{staticClass:"mint-msgbox-wrapper",staticStyle:{position:"fixed","z-index":"999",top:"0",left:"0",bottom:"0",right:"0",margin:"auto","background-color":"rgba(100,100,100,0.5)"}},[e("div",{staticClass:"mint-msgbox"},[s._m(2),s._v(" "),e("div",{staticClass:"mint-msgbox-content"},[e("div",{staticClass:"mint-msgbox-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.shopPickName,expression:"shopPickName"}],attrs:{type:"text",placeholder:"请输入修改的门店自提联系人"},domProps:{value:s.shopPickName},on:{blur:s.blurWatch,input:function(t){t.target.composing||(s.shopPickName=t.target.value)}}}),s._v(" "),e("div",{staticClass:"mint-msgbox-errormsg",staticStyle:{visibility:"hidden"}})]),s._v(" "),e("div",{staticClass:"mint-msgbox-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.shopPickAdd.address,expression:"shopPickAdd.address"}],attrs:{type:"text",placeholder:"请输入修改的门店自提地址"},domProps:{value:s.shopPickAdd.address},on:{blur:s.blurWatch,input:function(t){t.target.composing||s.$set(s.shopPickAdd,"address",t.target.value)}}}),s._v(" "),e("div",{staticClass:"mint-msgbox-errormsg",staticStyle:{visibility:"hidden"}})])]),s._v(" "),e("div",{staticClass:"mint-msgbox-btns"},[e("button",{staticClass:"mint-msgbox-btn mint-msgbox-cancel ",on:{click:function(t){t.stopPropagation(),s.changShopAddFlag=!1}}},[s._v("取消")]),s._v(" "),e("button",{staticClass:"mint-msgbox-btn mint-msgbox-confirm ",on:{click:function(t){return t.stopPropagation(),s.changShopAddConfig(t)}}},[s._v("确定")])])])]):s._e()],1)],1)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"address-r"},[t("i",{staticClass:"iconfont you"},[this._v("")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"address-r"},[t("i",{staticClass:"iconfont you"},[this._v("")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"mint-msgbox-header"},[t("div",{staticClass:"mint-msgbox-title"},[this._v("提示")])])}]};var h=e("VU/8")(l,p,!1,function(s){e("jCBX")},"data-v-544effe6",null);t.default=h.exports},jCBX:function(s,t){}});