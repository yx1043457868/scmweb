webpackJsonp([56],{"4iTU":function(t,e){},"i+Nb":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("34+y");var i=o("X+yh"),n=o.n(i),s=(o("OgVB"),o("/Lyv")),c=o.n(s),a=o("0xDb"),r={name:"editAddress",components:{},data:function(){return{contactName:"",contactPhone:"",contactProvince:"-1",contactCity:"-1",contactAddress:"",provinceList:[],cityList:[],flag:"2"}},created:function(){this.initProvinceList(),this.contactName=this.$route.query.shopTact?this.$route.query.shopTact:"",this.contactPhone=this.$route.query.shopTel?this.$route.query.shopTel:"",this.contactAddress=this.$route.query.address?"undefined"==this.$route.query.address?"":this.$route.query.address:"",this.contactProvince=this.$route.query.province_id?"undefined"==this.$route.query.province_id?"-1":this.$route.query.province_id:"-1",this.contactCity=this.$route.query.city_id?"undefined"==this.$route.query.city_id?"-1":this.$route.query.city_id:"-1",this.loadCity(this.$route.query.province_id,"init")},methods:{back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.back(-1)},deleteAdd:function(){var t=this;c.a.confirm("确定删除该地址?").then(function(e){var o="{'shopAddressId':'"+t.$route.query.id+"'}";t.$post("/appShippingAddress/deleteShopAddress.do",{content:o,version:"kkllo",login_token:t.$store.getters.logintoken}).then(function(e){var o=JSON.parse(e);"yes"==o.optFlag?(n()({message:o.optRes,duration:1e3}),setTimeout(function(){t.$router.go(-1)},1e3)):n()({message:o.optDesc,duration:1e3})})}).catch(function(){})},initProvinceList:function(){var t=this,e="{'company_id':'"+(this.$store.getters.account?this.$store.getters.account:{}).companyId+"'}";this.$post("/appRegister/provinceList.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var o=JSON.parse(e);"yes"==o.optFlag?t.provinceList=o.res:n()({message:o.optDesc,duration:1e3})})},loadCity:function(t,e){var o=this,i="{'parentid':'"+t+"'}";this.$post("/appRegister/cityList.do",{content:i,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var i=JSON.parse(t);"yes"==i.optFlag?(o.cityList=i.res,o.cityList.length>0?o.contactCity="change"==e?o.cityList[0].id:o.$route.query.city_id:o.contactCity=""):n()("地址初始化失败")})},save:function(){var t=this;if(""==this.contactName)return n()({message:"请填写收货人",duration:1e3}),!1;if(""==this.contactPhone)return n()({message:"请填写收货联系方式",duration:1e3}),!1;if(!Object(a.g)(this.contactPhone))return n()({message:"手机号格式不正确",duration:1e3}),!1;if(""==this.contactProvince||"-1"==this.contactProvince)return n()({message:"请选择所在地区",duration:1e3}),!1;if(""==this.contactAddress)return n()({message:"请输入详细地址",duration:1e3}),!1;var e=this.$store.getters.account?this.$store.getters.account:{},o=e.shopId;e.account;this.contactCity||(this.contactCity="");var i="{'shopAddress':{'id':'"+this.$route.query.id+"','shopId':'"+o+"','contactName':'"+this.contactName+"','contactPhone':'"+this.contactPhone+"','contactProvince':'"+this.contactProvince+"','contactCity':'"+this.contactCity+"','contactAddress':'"+this.contactAddress+"'}}";this.$post("/appShippingAddress/updateShopAddress.do",{content:i,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var o=JSON.parse(e);"yes"==o.optFlag?(n()({message:o.optRes,duration:1e3}),setTimeout(function(){t.$router.go(-1)},1e3)):n()({message:o.optRes,duration:1e3})})}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"header"},[o("mt-header",{attrs:{title:"编辑收货地址"}},[o("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"}),t._v(" "),o("mt-button",{attrs:{slot:"right",icon:""},on:{click:t.save},slot:"right"},[o("span",{staticClass:"headBtn"},[t._v("保存")])])],1)],1),t._v(" "),o("div",{staticClass:"my-content"},[o("div",{staticClass:"form-wrapper"},[o("mt-field",{attrs:{label:"",placeholder:"请输入收货人"},model:{value:t.contactName,callback:function(e){t.contactName=e},expression:"contactName"}}),t._v(" "),o("mt-field",{attrs:{label:"",placeholder:"请输入手机号",type:"tel"},model:{value:t.contactPhone,callback:function(e){t.contactPhone=e},expression:"contactPhone"}}),t._v(" "),o("div",{staticClass:"mint-cell mint-field",attrs:{"data-v-3c547f92":""}},[o("div",{staticClass:"mint-cell-wrapper"},[o("div",{staticClass:"mint-cell-value"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.contactProvince,expression:"contactProvince"}],staticClass:"required",attrs:{name:"province",id:"province"},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.contactProvince=e.target.multiple?o:o[0]},function(e){t.loadCity(t.contactProvince,"change")}]}},[o("option",{class:t.contactProvince?"":"backColor",attrs:{disabled:"",value:"-1",selected:""}},[t._v(" 请选择")]),t._v(" "),t._l(t.provinceList,function(e,i){return o("option",{key:i,class:t.contactProvince==e.title?"backColor":"",domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.contactCity,expression:"contactCity"},{name:"show",rawName:"v-show",value:t.cityList&&t.cityList.length>0,expression:"cityList && cityList.length > 0"}],attrs:{name:"city",id:"city"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.contactCity=e.target.multiple?o:o[0]}}},[o("option",{class:t.contactProvince?"":"backColor",attrs:{disabled:"",value:"-1",selected:""}},[t._v("请选择")]),t._v(" "),t._l(t.cityList,function(e,i){return o("option",{key:i,class:t.contactCity==e.title?"backColor":"",domProps:{value:e.id}},[t._v(t._s(e.title))])})],2)])]),t._v(" "),o("div",{staticClass:"mint-cell-right"})]),t._v(" "),o("mt-field",{attrs:{label:"",placeholder:"请输入详细地址",type:"textarea",rows:"2"},model:{value:t.contactAddress,callback:function(e){t.contactAddress=e},expression:"contactAddress"}})],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"2"==t.flag,expression:"flag == '2'"}],staticClass:"bottom-btn"},[o("button",{staticClass:"def-btn",attrs:{type:"button"},on:{click:t.deleteAdd}},[t._v("删除收货地址")])])])])},staticRenderFns:[]};var d=o("VU/8")(r,l,!1,function(t){o("4iTU")},"data-v-1856d704",null);e.default=d.exports}});