webpackJsonp([46],{"P+xM":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("34+y");var a=i("X+yh"),s=i.n(a),n=i("teIl"),o=i("0xDb"),c={name:"activitydetail",components:{Header:n.a},data:function(){return{activeStyle:0,activedetail:{},isShow:!0}},computed:{},created:function(){this.activeDetail()},methods:{activeDetail:function(){var t=this,e="{'activityId':'"+(this.$route.query.id?this.$route.query.id:{})+"','shopId':'"+(this.$store.getters.account?this.$store.getters.account:{}).shopId+"'}";this.$post("/activity/activityView.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var i=JSON.parse(e);if("yes"==i.optFlag){t.activedetail=i.res[0];var a=new Date,n=Object(o.a)(t.activedetail.signups_time),c=Object(o.a)(t.activedetail.signupe_time);if(t.activedetail&&t.activedetail.signflag)return t.activeStyle=1;if(n>a)return t.activeStyle=2;if(a>c)return t.activeStyle=3}else s()("数据查询失败")})},addactive:function(){var t=this;this.isShow=!1;var e=this.$route.query.id?this.$route.query.id:{},i=this.$store.getters.account?this.$store.getters.account:{},a="{'activityId':'"+e+"','shopId':'"+i.shopId+"','account':'"+i.account+"'}",n=this;this.$post("/activity/signUpactivity.do",{content:a,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){if("yes"==JSON.parse(e).optFlag){s()({message:"报名成功",duration:1800});var i=setInterval(function(){n.$router.push({path:"/myactivity"}),clearInterval(i)},2e3)}else s()("报名失败，重新试试"),t.isShow=!0})}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Header",{attrs:{title:"活动详情"}}),t._v(" "),i("div",{staticClass:"activetop"},[i("p",[t._v("活动标题:"+t._s(t.activedetail.name))]),t._v(" "),i("p",[t._v("活动类型:"+t._s(t.activedetail.typeName))]),t._v(" "),i("p",[t._v("报名时间:"+t._s(t.activedetail.signups_time)+"---"+t._s(t.activedetail.signupe_time))]),t._v(" "),i("p",[t._v("活动时间:"+t._s(t.activedetail.start_time)+"---"+t._s(t.activedetail.end_time))])]),t._v(" "),i("div",{staticClass:"activecontent"},[i("p",[t._v("活动内容:")]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.activedetail.content)}})]),t._v(" "),0==t.activeStyle?i("div",{staticClass:"bottom-btn"},[i("button",{staticClass:"def-btn",attrs:{type:"button"},on:{click:t.addactive}},[t._v("报名参加")])]):t._e(),t._v(" "),1==t.activeStyle?i("div",{staticClass:"bottom-btn"},[i("button",{staticClass:"def-btn",attrs:{type:"button",disabled:""}},[t._v("已报名")])]):t._e(),t._v(" "),3==t.activeStyle?i("div",{staticClass:"bottom-btn"},[i("button",{staticClass:"def-btn",attrs:{type:"button",disabled:""}},[t._v("报名已结束")])]):t._e(),t._v(" "),2==t.activeStyle?i("div",{staticClass:"bottom-btn"},[i("button",{staticClass:"def-btn",attrs:{type:"button",disabled:""}},[t._v("未开始报名")])]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShow,expression:"!isShow"}],staticClass:"mask"})],1)},staticRenderFns:[]};var r=i("VU/8")(c,v,!1,function(t){i("kmK+")},"data-v-49f0afdd",null);e.default=r.exports},"kmK+":function(t,e){}});