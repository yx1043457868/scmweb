webpackJsonp([14],{"/L3X":function(t,s){},WoUC:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});i("OgVB");var a=i("/Lyv"),e=i.n(a),n=(i("34+y"),i("X+yh")),o=i.n(n),r=i("gsqX"),c=i.n(r),u=(i("mgS3"),i("uGIt")),l=i("0xDb"),d={name:"detail",data:function(){return{product:{},img_path:"",imgList:[],fnum_unit:0,mnum_unit:0,isShow:!1,shopsample:[],owner:"",swiper:null,good:{},favory:"N",retailShow:!1,sku_dec:"",registerFlag:!!this.$store.getters.company,popupSample:!1}},computed:{shopCount:function(){var t=0;return this.$store.state.sample.forEach(function(s){t+=parseFloat(s.value)}),t}},created:function(){this.productDetail(),this.isFavoryProduct()},methods:{back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1)},addRetail:function(){this.retailShow=!this.retailShow},productDetail:function(){var t=this,s="{'giftId':'"+this.$route.query.id+"','companyId':'"+Object(l.d)()+"'}";this.$post("/appGift/giftProductInfo.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(s){var i=JSON.parse(s);if("yes"==i.optFlag){t.product=i.res,t.img_path=i.res.img_path,t.sku_dec=i.res.sku_dec,t.imgList=i.res.imgList?i.res.imgList:[];var a=window.location.href.split("#")[0];u.a.wxRegister(t,a,{title:"良之隆官方商城",imgUrl:t.baseurl+i.res.img_path,desc:i.res.sku_name,success:function(t){},fail:function(t){o()("产生了一个分享错误")}}),t.$nextTick(function(){t._initSwiper()});var e=t.$store.state.sample.findIndex(function(t){return t.id==i.res.id});-1===e?(t.fnum_unit=0,t.mnum_unit=0):(t.fnum_unit=t.$store.state.sample[e].value,t.mnum_unit=t.$store.state.sample[e].mnum_value||0)}else o()({message:"数据请求失败",duration:1e3})})},_initSwiper:function(){new c.a("#swiper1",{autoplay:3e3,speed:300,loop:!1,pagination:".swiper-pagination",direction:"horizontal",watchOverflow:!0,autoplayDisableOnInteraction:!1,slidesPerView:1,paginationClickable:!0,centeredSlides:!1,observer:!0,observeParents:!0})},isFavoryProduct:function(){var t=this,s=this.$route.query.id,i=this.$store.getters.account?this.$store.getters.account:{};if(i&&i.account){var a="{'id':'"+s+"','account':'"+i.account+"'}";this.$post("/appVpProduct/isFavoryProduct.do",{content:a,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(s){var i=JSON.parse(s);"yes"==i.optFlag?t.favory=i.isFavory:o()({message:"数据请求失败",duration:1e3})})}else this.favory="N"},add:function(t){var s=this;return this.$store.state.logindata.logintoken?"Y"!=t.is_enable?(o()({message:"该商品已下架！",duration:950}),!1):void(this.isShow=!0):(e.a.confirm("请先登录系统").then(function(t){s.$router.push({path:"/login"})}).catch(function(){}),!1)},changeValue:function(t,s,i){var a=i.target.value||0;""==a&&(this.fnum_unit=0),1==s?this.fnum_unit=parseFloat(a.toString().match(/\d+(\.\d{0,2})?/)?a.toString().match(/\d+(\.\d{0,2})?/)[0]:"")||0:0==s&&(-1!=this.fnum_unit.toString().indexOf(".")&&o()("该商品只能输入整数"),this.fnum_unit=parseInt(a.toString().replace(/[^\d]+/g,""))||0)},confirm:function(t){if(Object(l.f)(this.fnum_unit)&&Object(l.f)(this.mnum_unit))return o()("采购数量不能为0"),!1;this.isShow=!1;var s=this.$store.state.sample.findIndex(function(s){return s.id==t.id});-1===s?(t.value=this.fnum_unit,t.mnum_value=this.mnum_unit,t.checked=!0,this.$store.commit("addsampleCarts",t),o()("加入采购单成功！")):(this.$store.state.sample[s].value=this.fnum_unit,this.$store.commit("setsample",this.$store.state.sample),o()("加入采购单成功！"))},addCart:function(t){this.fnum_unit?this.fnum_unit++:this.fnum_unit=1},decreaseCart:function(t){if(this.fnum_unit<=0)return this.fnum_unit=0,o()({message:"宝贝不能再减少啦！",duration:950}),!1;this.fnum_unit-=1}}},p={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"product_detail"},[i("div",{staticClass:"goods_banner"},[i("div",{staticClass:"back",on:{click:t.back}},[i("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),i("div",{staticClass:"swiper-container goods-container",attrs:{id:"swiper1"}},[t.imgList&&t.imgList.length>0?i("div",{staticClass:"swiper-wrapper"},t._l(t.imgList,function(s,a){return i("div",{key:a,staticClass:"swiper-slide"},[i("img",{staticClass:"img-dec",attrs:{src:t.baseurl+s.img_path,alt:s.sku_name}})])}),0):i("div",{staticClass:"swiper-wrapper"},[i("div",{staticClass:"swiper-slide"},[i("img",{staticClass:"img-dec",attrs:{src:t.baseurl+t.img_path,alt:t.product.sku_name}})])]),t._v(" "),i("div",{staticClass:"swiper-pagination"})])]),t._v(" "),i("div",{staticClass:"goods-info",attrs:{sku_code:t.product.sku_code,class_id:t.product.class_id,id:t.product.id}},[i("h4",{staticClass:"list-name mui-ellipsis"},[t._v(t._s(t.product.sku_name)+" ")]),t._v(" "),i("p",{staticClass:"list-size mui-ellipsis"},[t._v("规格："+t._s(t.product.styleno))]),t._v(" "),i("span",{staticClass:"list-size"},[t._v("商品编码："+t._s(t.product.sku_code))]),t._v(" "),i("br")]),t._v(" "),t.sku_dec&&""!=t.sku_dec?i("div",{staticClass:"product-text"},[t._m(0),t._v(" "),i("p",{staticClass:"dec-text",domProps:{innerHTML:t._s(t.sku_dec)}})]):t._e(),t._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"dialogMask",attrs:{id:"dialogMask"},on:{click:function(s){t.isShow=!1}}}),t._v(" "),i("transition",{attrs:{name:"slide","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"dialog-wrapper",attrs:{id:"dialog"}},[i("div",{staticClass:"dialog-box"},[i("ul",{staticClass:"goods-list dialog-goods",attrs:{id:"dialog-goods"}},[i("li",{staticClass:"mui-table-view-cell"},[i("div",{staticClass:"food-link"},[i("img",{attrs:{src:t.baseurl+t.img_path}}),t._v(" "),i("div",{staticClass:"recommend"},[i("span",{staticClass:"close-dialog",on:{click:function(s){s.stopPropagation(),t.isShow=!1}}},[t._v("×")]),t._v(" "),i("h4",{staticClass:"skuName shotName"},[t._v(t._s(t.product.sku_name))]),t._v(" "),i("p",{staticClass:"styleno"},[t._v("规格："+t._s(t.product.styleno))]),t._v(" "),i("p",{staticClass:"styleno"},[t._v("商品编码："+t._s(t.product.sku_code))])])])])]),t._v(" "),i("div",[i("div",{staticClass:"input-content"},[i("span",{staticClass:"red"},[t._v("*该货品只能输入整数*")])]),t._v(" "),i("div",{staticClass:"input-content"},[i("label",{staticClass:"left"},[t._v("订购数量("+t._s(t.product.uom_default)+")：")]),t._v(" "),i("div",{staticClass:"right input-row"},[i("div",{staticClass:"cartcontrol"},[i("button",{staticClass:"cart-decrease",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.decreaseCart(t.product)}}},[t._v("-")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fnum_unit,expression:"fnum_unit"}],staticClass:"cart-count",attrs:{type:"number",step:"1",min:"0",onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:t.fnum_unit},on:{blur:function(s){t.changeValue(t.product,0,s)},input:function(s){s.target.composing||(t.fnum_unit=s.target.value)}}}),t._v(" "),i("button",{staticClass:"cart-add",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.addCart(t.product)}}},[t._v("+")])])])])]),t._v(" "),i("button",{staticClass:"sure_btn",on:{click:function(s){t.confirm(t.product)}}},[t._v("确定")])])])]),t._v(" "),i("div",{staticClass:"toolbar"},["N"==t.product.isEnable?i("button",{staticClass:"mui-btn add-btn",staticStyle:{width:"100%"},attrs:{type:"button",disabled:"disabled"}},[t._v("已下架")]):i("button",{staticClass:"mui-btn add-btn",staticStyle:{width:"100%"},attrs:{type:"button"},on:{click:function(s){s.stopPropagation(),t.add(t.product)}}},[t._v("加入采购单")])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{staticClass:"dec-title"},[s("span",[this._v("---商品信息---")])])}]};var m=i("VU/8")(d,p,!1,function(t){i("/L3X")},"data-v-ffac135e",null);s.default=m.exports}});