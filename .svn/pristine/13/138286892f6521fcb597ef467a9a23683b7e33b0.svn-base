webpackJsonp([7],{"27jG":function(t,e){},"6Ok+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("yvAY");var a=s("fc0N"),i=s.n(a),n=(s("PBmY"),s("I4Nl")),o=s.n(n),r=s("teIl"),l=s("/QXl"),c=s("4YfN"),u=s.n(c),p=s("2bvH"),d=s("0xDb"),f={name:"shopBar",data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[]}},computed:u()({},Object(p.a)(["sampleCount"]),{disabled:function(){return 0==this.sampleCount}}),methods:{commit:function(){this.$router.push({path:"/cofirmSimple"})},popupVisible:function(){this.$emit("popupOpen")},drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeDrop:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var a=s.el.getBoundingClientRect(),i=a.left,n=-(window.innerHeight-a.top-52);t.style.display="",t.style.webkitTransform="translate3d(0,"+n+"px,0)",t.style.transform="translate3d(0,"+n+"px,0)";var o=t.getElementsByClassName("inner-hook")[0];o.style.webkitTransform="translate3d("+i+"px,0,0)",o.style.transform="translate3d("+i+"px,0,0)"}}},dropping:function(t,e){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var s=t.getElementsByClassName("inner-hook")[0];s.style.webkitTransform="translate3d(0,0,0)",s.style.transform="translate3d(0,0,0)",t.addEventListener("transitionend",e)})},afterDrop:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("footer",{staticClass:"shop_cart"},[s("div",{staticClass:"gwcInfo",class:[t.sampleCount>0?"fill":""],on:{click:function(e){return e.stopPropagation(),t.popupVisible(e)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:t.sampleCount>0,expression:"sampleCount>0"}]},[t._v(t._s(t.sampleCount))])]),t._v(" "),s("button",{attrs:{type:"button",disabled:t.disabled},on:{click:t.commit}},[t._v("立即申请")])]),t._v(" "),s("div",{staticClass:"ball-container"},t._l(t.balls,function(e,a){return s("div",{key:a},[s("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)}),0)])},staticRenderFns:[]};var v=s("C7Lr")(f,h,!1,function(t){s("27jG")},"data-v-b9118e8c",null).exports,m=(s("lRwf"),{props:{food:{type:Object}},methods:{addCart:function(t,e){if("N"==e.is_enable)return o()({message:"该商品已下架！",duration:950}),!1;var s=this.$store.state.sample.findIndex(function(t){return t.giftId==e.giftId});if(-1===s||null==s||void 0==s)e.value=1,e.checked=!0,this.$store.commit("addsampleCarts",e),this.$emit("addCart",t.target);else{if("Y"==e.is_gift)return i()("提示","赠品时不能修改数量，默认为1"),e.value=1,!1;e.checked=!0,this.$store.commit("addsample",s),this.$emit("addCart",t.target)}}}}),C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol"},[s("button",{staticClass:"cart-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addCart(e,t.food)}}},[s("span",[t._v("免费拿样")])])])},staticRenderFns:[]};var _={name:"applySimple",components:{samplecontrol:s("C7Lr")(m,C,!1,function(t){s("X71M")},"data-v-3e5925b0",null).exports,shopBar:v,MescrollVue:s("2Un3").a,Header:r.a},data:function(){return{popupVisible:!1,currentIndex:0,curIndex:"",mescroll:null,mescrollDown:{},mescrollUp:{callback:this.upCallback,page:{num:0,size:10},htmlNodata:'<p class="upwarp-nodata">-- 没有更多了 --</p>',noMoreSize:5,empty:{warpId:"mescroll",icon:"static/images/none.png",tip:"暂无相关数据~"}},ProductS:[],classId:"",searchKey:sessionStorage.searchValue?sessionStorage.searchValue:"",classTwoId:"",classTwoList:"",ProductClass:[],popupSample:!1,fakeLoginInfo:this.$store.getters.fakeLoginInfo}},computed:{sample:function(){return this.$store.state.sample}},created:function(){this.initClass()},mounted:function(){},watch:{ProductClass:function(t,e){this.ProductClass.length>0&&0==this.currentIndex&&(this.classId=this.ProductClass[0].id)},popupSample:function(){this.$nextTick(function(){this.popupSample&&this._initScroll()})}},methods:{toShopCart:function(){this.$router.push({path:"/shopCart"})},mescrollInit:function(t){this.mescroll=t},beforeRouteEnter:function(t,e,s){s(function(t){t.$refs.mescroll.beforeRouteEnter()})},beforeRouteLeave:function(t,e,s){this.$refs.mescroll.beforeRouteLeave(),s()},addFood:function(t){this._drop(t)},_drop:function(t){var e=this;this.$nextTick(function(){e.$refs.shopcart.drop(t)})},back:function(){sessionStorage.searchValue="",this.$router.back(-1)},_initTab:function(){var t=this.$route.query.tab;if(t){var e=this.$refs.foodList[t];this.foodsScroll.scrollToElement(e,300,0,0)}},_initScroll:function(){this.meunScroll=new l.a(this.$refs.menuWrapper,{click:!0,probeType:3}),this.slider=new l.a(this.$refs.slider,{click:!0,scrollX:!0,eventPassthrough:"vertical"}),this.sampleCart=new l.a(this.$refs.sampleCart,{click:!0,probeType:3})},selectMenu:function(t,e){this.ProductS=[],this.popupVisible=!1,this.classId=e,this.curIndex="",this.searchKey="",sessionStorage.searchValue="",this.classTwoId="",this.currentIndex=t,this.classTwoList=this.ProductClass[t].classTwoList,this.mescroll.resetUpScroll()},selectSubMenu:function(t,e){this.popupVisible=!1,this.classTwoId=e,this.searchKey="",sessionStorage.searchValue="",this.curIndex=t,this.mescroll.resetUpScroll()},godetails:function(t){this.$router.push({path:"details",query:{id:t}})},search:function(t){t&&(sessionStorage.searchValue=t,this.searchKey=t,this.classId="",this.currentIndex="",this.mescroll.resetUpScroll())},initClass:function(){var t=this,e=Object(d.d)();this.$post("/appSaleManGift/saleGiftClass.do",{content:'{"companyId":"'+e+'"}',version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var s=JSON.parse(e);"yes"==s.optFlag?(t.ProductClass=s.res.list,t.classId=s.res.list[0].id,t.classTwoList=s.res.list[0].classTwoList,t.$nextTick(function(){t._initScroll()})):o()("商品加载失败")})},upCallback:function(t,e){var s=this;setTimeout(function(){var a=Object(d.d)();s.searchKey&&(s.classId="",s.classTwoId="",s.currentIndex=-1,s.classTwoList=[]);var i=s.classId,n='{"companyId":"'+a+'","searchKey":"'+s.searchKey+'","classId":"'+i+'","classTwoId": "'+s.classTwoId+'","pageSize": "'+t.size+'","pageNo": "'+t.num+'"}';s.$post("/appSaleManGift/saleClassGiftList.do",{content:n,version:"kkllo",login_token:s.$store.getters.logintoken}).then(function(a){var i=JSON.parse(a);if(i.res&&i.res.length>0){var n=i.res;1===t.num&&(s.ProductS=[]),s.ProductS=s.ProductS.concat(n),s.$nextTick(function(){e.endSuccess(n.length)})}else s.ProductS=[],s.$nextTick(function(){e.endSuccess(s.ProductS.length)})}).catch(function(t){e.endErr()})},1e3)},clear:function(){this.$store.commit("clearsample"),this.popupSample=!1},appear:function(){this.popupSample=!this.popupSample},changeValue:function(t,e,s){var a=s.target.value;-1!=t.value.toString().indexOf(".")&&o()("样品数量只能输入整数"),t.value=parseInt(a.toString().replace(/[^\d]+/g,""))||0,Object(d.f)(t.value)&&(o()("样品数量不能为空"),t.value=1)},addCart:function(t,e){if("Y"==t.is_gift)return i()("提示","赠品时不能修改数量，默认为1"),!1;this.$store.commit("addsample",e)},decreaseCart:function(t,e){var s=this;1==this.$store.state.sample[e].value?i.a.confirm("确定删除该样品?").then(function(t){s.$store.commit("reducesample",e)}).catch(function(){}):this.$store.commit("reducesample",e)}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"classify",staticStyle:{height:"100VH"}},[s("Header",{attrs:{title:"样品申报"}}),t._v(" "),s("div",{staticClass:"header"},[s("mt-header",{attrs:{title:"样品申报"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"})],1)],1),t._v(" "),s("div",{staticClass:"top-bar clearfix",staticStyle:{"box-shadow":"none"}},[s("div",{staticClass:"top-bar-box"},[s("div",{staticClass:"top_search  mui-pull-left"},[s("span",{staticClass:"search-icon iconfont"},[t._v("")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"mui-pull-left",attrs:{type:"search",placeholder:"输入食材名称/编码/拼音搜索",id:"search_input"},domProps:{value:t.searchKey},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(t.searchKey)},input:function(e){e.target.composing||(t.searchKey=e.target.value)}}}),t._v(" "),s("button",{staticClass:"search_btn",on:{click:function(e){return t.search(t.searchKey)}}},[t._v("搜索")])])])]),t._v(" "),s("div",{staticClass:"tab tabContent classifyBox"},[s("div",{ref:"menuWrapper",staticClass:"left menu-wrapper"},[s("ul",{attrs:{id:"typeList"}},t._l(t.ProductClass,function(e,a){return s("li",{key:a,ref:"menuList",refInFor:!0,class:{cur:t.currentIndex===a},attrs:{id:e.id,index:a},on:{click:function(s){return s.stopPropagation(),t.selectMenu(a,e.id)}}},[s("span",[t._v(t._s(e.name))])])}),0)]),t._v(" "),s("div",{ref:"foodsWrapper",staticClass:"right foods-wrapper",attrs:{id:"goodsList"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.classTwoList.length>0&&""!==t.currentIndex,expression:"classTwoList.length > 0 && currentIndex !== ''"}],staticClass:"fixed-bar"},[s("div",{ref:"slider",staticClass:"slider"},[s("div",{staticClass:"slider-group"},t._l(t.classTwoList,function(e,a){return s("div",{key:a,staticClass:"slider-item",class:{cur:t.curIndex===a},attrs:{id:e.id},on:{click:function(s){return t.selectSubMenu(a,e.id)}}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}),0)]),t._v(" "),s("div",{staticClass:"up-down",on:{click:function(e){t.popupVisible=!t.popupVisible}}},[s("span",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popupVisible",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.popupVisible=!1}}},[s("div",{staticClass:"popWrap"},t._l(t.classTwoList,function(e,a){return s("div",{key:a,staticClass:"pop-item",class:{cur:t.curIndex===a},attrs:{id:e.id},on:{click:function(s){return t.selectSubMenu(a,e.id)}}},[s("span",[t._v(t._s(e.name))])])}),0)])]),t._v(" "),s("mescroll-vue",{ref:"mescroll",class:[t.classTwoList.length>0&&""!==t.currentIndex?"top-mescroll":""],attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[s("div",{attrs:{id:"mescroll"}},[s("div",{ref:"foodList",staticClass:"tab_content"},[s("ul",{staticClass:"goods-list"},t._l(t.ProductS,function(e,a){return s("li",{key:a,staticClass:"mui-table-view-cell",attrs:{giftId:e.giftId}},[s("router-link",{staticClass:"food-link",attrs:{to:{path:"/simpleDetail",query:{id:e.giftId}},tag:"div"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+e.img_path,expression:"baseurl+food.img_path"}]}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"Y"!=e.is_enable,expression:"food.is_enable != 'Y'"}],staticClass:"is_enable"},[t._v("已下架")]),t._v(" "),s("div",{staticClass:"recommend sales-info"},[s("h4",{staticClass:"skuName"},[t._v(t._s(e.sku_name))]),t._v(" "),s("p",{staticClass:"styleno"},[t._v("规格："+t._s(e.styleno))]),t._v(" "),s("span",{staticClass:"price",staticStyle:{"font-size":"11px",color:"#888"}},[t._v("商品编码："+t._s(e.sku_code))])])]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper"},[s("samplecontrol",{attrs:{food:e},on:{addCart:t.addFood}})],1)],1)}),0)])])])],1)]),t._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:t.popupSample,expression:"popupSample"}],staticClass:"dialogMask",attrs:{id:"dialogMask"},on:{click:function(e){t.popupSample=!1}}}),t._v(" "),s("transition",{attrs:{name:"slide","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.popupSample,expression:"popupSample"}],staticClass:"dialog-wrapper",attrs:{id:"dialog"}},[s("div",{staticClass:"dialog-box"},[s("div",{staticClass:"popup"},[s("div",{staticClass:"popup-header"},[s("span",[t._v("已选样品")]),t._v(" "),s("span",{staticClass:"iconfont clearpopup",on:{click:t.clear}},[t._v("清空")])]),t._v(" "),s("div",{ref:"sampleCart",staticClass:"cart-wrapper"},[s("div",[s("ul",t._l(t.sample,function(e,a){return s("li",{key:a,staticClass:"mui-input-row mui-checkbox mui-left"},[s("label",{staticClass:"sku_name"},[t._v(t._s(e.sku_name))]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper",staticStyle:{right:"25px"}},[s("div",{staticClass:"cartcontrol"},[s("button",{staticClass:"cart-decrease",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.decreaseCart(e,a)}}},[t._v("-")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"car.value"}],staticClass:"cart-count",attrs:{type:"number",step:"1",min:"0",id:e.id,onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:e.value},on:{blur:function(s){return t.changeValue(e,a,s)},input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}}),t._v(" "),s("button",{staticClass:"cart-add",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addCart(e,a)}}},[t._v("+")])])]),t._v(" "),s("em",{staticClass:"uomDefault"},[t._v(t._s(e.uom_default))])])}),0)])])])])])]),t._v(" "),s("shopBar",{ref:"shopcart",on:{popupOpen:t.appear}})],1)},staticRenderFns:[]};var g=s("C7Lr")(_,b,!1,function(t){s("pTU7")},"data-v-29d9bce4",null);e.default=g.exports},X71M:function(t,e){},pTU7:function(t,e){}});