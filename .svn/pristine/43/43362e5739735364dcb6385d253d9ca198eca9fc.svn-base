webpackJsonp([20],{fjti:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("yvAY");var o=s("fc0N"),n=s.n(o),i=s("3cXf"),a=s.n(i),c=(s("PBmY"),s("I4Nl")),r=s.n(c),l=s("teIl"),h=s("0xDb"),u=(s("2bvH"),{name:"Login",components:{Header:l.a},data:function(){return{userImg:this.$store.getters.account.logoPath?this.$store.getters.account.logoPath:s("Z2Ou"),phone:"",password:"",Info:"",popupVisible:!1,name:"",value:[],x:"",currentTags:{},dateSlots:[],showAddress:!1,myCroppaLicence:[],show:!0,show0:!0,show1:!0,show2:!0,show3:!0,old:"",new1:"",new2:"",disabled:!1,count:60,code_text:"获取验证码",intervalobj:null,code:"",Invatecode:"",nm:"",shopObj:""}},methods:{modify:function(t){0==t&&(this.show=!1,this.show0=!1),2==t?(this.show=!1,this.show2=!1):3==t?(this.show=!1,this.show1=!1):1==t&&(this.show=!1,this.show3=!1)},sendCode:function(){var t=this;if(""==this.phone)return r()({message:"请输入手机号",duration:1e3}),!1;if(!Object(h.g)(this.phone))return r()({message:"请输入正确的手机号格式",duration:1e3}),!1;this.intervalobj=setInterval(function(){t.count>0?(t.code_text=t.count+"s后重新获取",t.disabled=!0,t.count--):0==t.count&&(t.code_text="获取验证码",t.disabled=!1,clearInterval(t.intervalobj),t.count=60)},1e3);var e="{'phone':'"+this.phone+"'}";this.$post("/appAccount/sendModifyYzm.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(t){var e=JSON.parse(t);(e.optFlag="yes")?r()(e.optDesc):(r()(e.optDesc),this.code_text="获取验证码",this.disabled=!1,clearInterval(this.intervalobj),this.count=60)}).catch(function(t){console.log(t)})},change:function(){var t=this.$store.getters.account?this.$store.getters.account:{},e={inviteCode:this.Invatecode,accountId:t.id},s=this;this.$post("/appAccount/bindingSalesman.do",{content:a()(e),version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var e=JSON.parse(t);if(!(e.optFlag="yes"))return r()({content:e.optDesc,btn:"确定"}),!1;s.show=!s.show,s.show2=!0,s.show1=!0,(s.$store.getters.shop?s.$store.getters.shop:{}).salesman=e.salesman,s.$store.state.logindata.shop.salesman=e.salesman,s.$store.commit("setData",s.$store.state.logindata),r()({message:e.optDesc,time:2})}).catch(function(t){console.log(t)})},logHidex:function(t){},logShowx:function(t){},onShadowChange:function(t,e){},handleNewImage:function(){},back:function(t){if(1!=t)return 2==t?(this.show=!this.show,this.show1=!0,void(this.show2=!0)):void(3==t?(this.show=!this.show,this.show3=!0,this.show2=!0,this.show1=!0):4==t?(this.show=!this.show,this.show3=!0,this.show2=!0,this.show1=!0):0==t&&(this.show=!this.show,this.show2=!0,this.show1=!0,this.show0=!0));this.$router.back(-1)},backTo:function(t){2==t?this.savePass():0==t?this.saveName():3==t?this.change():4==t&&this.SavePhone()},SavePhone:function(){var t=this;if(""==this.phone)return n.a.confirm("未做修改，是否退出?").then(function(e){t.back(4)}).catch(function(){}),!1;if(!Object(h.g)(this.phone))return n.a.confirm("手机格式不正确，是否放弃修改?").then(function(e){t.back(4)}).catch(function(){}),!1;var e="{'oldPhone':'"+this.Info.phone+"','newPhone':'"+this.phone+"','yzm':'"+this.code+"'}";this.$post("/appAccount/updatephone.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var s=JSON.parse(e);if(console.log(s),"yes"!=s.optFlag)return n.a.confirm("手机号已注册或验证码不正确，是否退出?").then(function(e){t.back(4)}).catch(function(){}),!1;t.Info.phone=t.phone,t.$store.state.logindata.account.phone=t.phone,t.$store.commit("setData",t.$store.state.logindata),r()(s.optDesc),t.back(4)})},savePass:function(){var t=this;if(""!=this.old)if(""!=this.new1)if(this.new1.length>20||this.new1.length<6)r()({message:"密码长度不正确",time:2});else if(this.new1==this.new2)if(this.old!=this.new1){var e="{'account':'"+this.Info.account+"','oldPwd':'"+this.old+"',,'newPwd':'"+this.new2+"'}";this.$post("/appAccount/updatePassWard.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken},{emulateJSON:!0}).then(function(e){var s=JSON.parse(e);if("yes"==s.optFlag)if(t.$route.query.firstFlag)t.$router.push({path:"/"});else{r()(s.res),r()({message:s.res,time:2});var o=setInterval(function(){t.back(2),clearInterval(o)},2e3)}else r()({message:s.res,time:2})}).catch(function(t){console.log(t)})}else r()({message:"新密码不能与旧密码一样，请重新修改！",time:2});else r()({message:"两次新密码请保持一致！",time:2});else r()({message:"请输入新密码",time:2});else r()({message:"请输入旧密码",time:2})},loginOut:function(){var t=this;n.a.confirm("是否退出，重新登录?").then(function(e){if("confirm"==e){t.$post("/appAccount/loginOut.do",{content:"{}",version:"kkllo",login_token:t.$store.getters.logintoken}).then(function(e){(JSON.parse(e).yes="yes")&&(t.$store.commit("loginOut"),t.$store.commit("changIsFirstShare",""),t.$router.push("/login"))})}}).catch(function(){})},saveName:function(){var t=this.$store.getters.account?this.$store.getters.account:{},e=this.$store.getters.shop?this.$store.getters.shop:{},s="{'account':'"+t.account+"','shopId':'"+t.shopId+"','shopName':'"+this.name+"'}",o=this;this.$post("/appAccount/setAccountShopName.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var s=JSON.parse(t);if("yes"==s.optFlag){e.shop_name=o.name,o.$store.state.logindata.shop.shop_name=o.name,o.$store.commit("setData",o.$store.state.logindata),r()({message:s.optDesc,time:2});var n=setInterval(function(){o.back(0),clearInterval(n)},2e3)}else r()({message:s.optDesc,time:2})}).catch(function(t){console.log(t)})}},mounted:function(){this.Info=this.$store.getters.account?this.$store.getters.account:{};var t=this.$store.getters.company?this.$store.getters.company:{},e=this.$store.getters.shop?this.$store.getters.shop:{};this.nm=t.nm,this.name=e.shop_name,this.shopObj=e},created:function(){this.$route.query.firstFlag&&(r()({message:"首次登陆修改密码，并重新登录",duration:2e3}),this.modify(2))}}),p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[s("mt-header",{attrs:{title:"账户管理"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.back(1)}},slot:"left"})],1),t._v(" "),s("form",{staticClass:"mui-input-group"},[s("div",{staticClass:"mui-input-row",staticStyle:{height:"auto",padding:"10px 0"}},[s("label",[t._v("头像")]),t._v(" "),s("div",{staticClass:"right headerImg"},[s("img",{staticClass:"header-icon",attrs:{src:t.userImg}})])]),t._v(" "),s("div",{staticClass:"mui-input-row",on:{click:function(e){return t.modify(0)}}},[s("label",[t._v("名称")]),t._v(" "),s("i",{staticClass:"iconfont password"},[t._v("")]),t._v(" "),s("div",{staticClass:"iRight"},[t._v(t._s(t.name))])]),t._v(" "),s("div",{staticClass:"mui-input-row",on:{click:function(e){return t.modify(1)}}},[s("label",[t._v("手机绑定")]),t._v(" "),s("i",{staticClass:"iconfont password"},[t._v("")]),t._v(" "),s("div",{staticClass:"iRight"},[t._v(t._s(t.Info.phone))])]),t._v(" "),s("div",{staticClass:"mui-input-row",on:{click:function(e){return t.modify(2)}}},[s("label",[t._v("修改密码")]),t._v(" "),s("i",{staticClass:"iconfont password"},[t._v("")])])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.show0,expression:"!show0"}],staticClass:"password0"},[s("mt-header",{attrs:{title:"修改名称"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.back(0)}},slot:"left"}),t._v(" "),s("mt-button",{attrs:{slot:"right"},on:{click:function(e){return t.backTo(0)}},slot:"right"},[s("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),s("form",{staticClass:"mui-input-group"},[s("div",{staticClass:"mui-input-row"},[s("label",[t._v("名称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"mui-input-password",attrs:{type:"text",placeholder:"请输入名称"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.show2,expression:"!show2"}],staticClass:"password1"},[s("mt-header",{attrs:{title:"修改密码"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.back(2)}},slot:"left"}),t._v(" "),s("mt-button",{attrs:{slot:"right"},on:{click:function(e){return t.backTo(2)}},slot:"right"},[s("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),s("form",{staticClass:"mui-input-group"},[s("div",{staticClass:"mui-input-row"},[s("label",[t._v("旧密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.old,expression:"old"}],staticClass:"mui-input-password",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.old},on:{input:function(e){e.target.composing||(t.old=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"mui-input-row"},[s("label",[t._v("新密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.new1,expression:"new1"}],staticClass:"mui-input-password",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.new1},on:{input:function(e){e.target.composing||(t.new1=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"mui-input-row"},[s("label",[t._v("确认密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.new2,expression:"new2"}],staticClass:"mui-input-password",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.new2},on:{input:function(e){e.target.composing||(t.new2=e.target.value)}}})])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.show1,expression:"!show1"}],staticClass:"password2"},[s("mt-header",{attrs:{title:"修改业务员"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.back(3)}},slot:"left"}),t._v(" "),s("mt-button",{attrs:{slot:"right"},on:{click:function(e){return t.backTo(3)}},slot:"right"},[s("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),s("form",{staticClass:"mui-input-group"},[s("div",{staticClass:"mui-input-row"},[s("label",[t._v("输入邀请码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Invatecode,expression:"Invatecode"}],staticClass:"mui-input-password",attrs:{type:"text",placeholder:"请输入邀请码"},domProps:{value:t.Invatecode},on:{input:function(e){e.target.composing||(t.Invatecode=e.target.value)}}})])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.show3,expression:"!show3"}],staticClass:"password3"},[s("mt-header",{attrs:{title:"修改手机"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.back(4)}},slot:"left"}),t._v(" "),s("mt-button",{attrs:{slot:"right"},on:{click:function(e){return t.backTo(4)}},slot:"right"},[s("span",{staticClass:"headBtn"},[t._v("保存")])])],1),t._v(" "),s("form",{staticClass:"mui-input-group"},[s("mt-field",{attrs:{label:"手机号",placeholder:"请输入新手机号",type:"tel"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t._v(" "),s("button",{staticClass:"reg-btn",staticStyle:{"line-height":"10px"},attrs:{type:"button",disabled:t.disabled},on:{click:t.sendCode}},[t._v(t._s(t.code_text))]),t._v(" "),s("mt-field",{attrs:{label:"验证码",placeholder:"请输入验证码",type:"tel"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],1),t._v(" "),t.show?s("div",{staticClass:"loginx"},[s("button",{staticClass:"loginOut",attrs:{type:"button"},on:{click:t.loginOut}},[t._v("退出登录")])]):t._e()])},staticRenderFns:[]};var d=s("C7Lr")(u,p,!1,function(t){s("q4rf")},"data-v-e8f0237a",null);e.default=d.exports},q4rf:function(t,e){}});