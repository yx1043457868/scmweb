webpackJsonp([15],{"+qwh":function(t,e){},boqf:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("34+y");var i=s("X+yh"),n=s.n(i),a=s("p0f0"),o=s("0xDb"),r={name:"salesOrder",components:{MescrollVue:a.a},data:function(){return{searchText:"",search:!1,beginTime:"",endTime:"",dataVal:new Date,classId:this.$route.query.typeId||"",returnTotal:0,returnPrice:0,currentIndex:0,pickerVisible:!1,dataList:[{name:"全部",value:""},{name:"待审核",value:"9"},{name:"待入库",value:"10"},{name:"已入库",value:"15"},{name:"已退款",value:"16"}],popupVisible:!1,mescroll:null,mescrollDown:{},mescrollUp:{callback:this.upCallback,page:{num:0,size:10},htmlNodata:'<p class="upwarp-nodata">-- 没有更多了 --</p>',noMoreSize:5,empty:{warpId:"mescroll",icon:"static/images/none.png",tip:"暂无相关数据~"}},outOrderList:[]}},filters:{toFixed:function(t){return parseFloat(t).toFixed(2)}},mounted:function(){},computed:{orderTitle:function(){return""==this.classId?"全部退货单":"9"==this.classId?"待审核退货单":"10"==this.classId?"待入库退货单":"15"==this.classId?"已入库退货单":"16"==this.classId?"已退款退货单":void 0}},watch:{popupVisible:function(t){t?this.closeTouch():this.openTouch()}},methods:{back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.back(-1)},beginOpen:function(){this.$refs.beginPicker.open()},endOpen:function(){this.$refs.endPicker.open()},handleConfirm:function(){this.beginTime=Object(o.b)(this.$refs.beginPicker.value)},handleConfirmTwo:function(){this.endTime=Object(o.b)(this.$refs.endPicker.value)},mescrollInit:function(t){this.mescroll=t},upCallback:function(t,e){var s=this,i=this.$store.getters.account.companyId,n=this.$store.getters.account?this.$store.getters.account:"",a='{"companyId": "'+i+'","shopId": "'+(n?n.shopId:"")+'","startDate": "'+this.beginTime+'","endDate": "'+this.endTime+'","asnStatus":"'+this.classId+'","searchText":"'+this.searchText+'","pageSize": "'+t.size+'","pageNo": "'+t.num+'"}';this.$post("/returnorder/getReturnOrderList.do",{content:a,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(i){var n=JSON.parse(i),a=n.res.rows;s.returnTotal=n.res.totalCount,s.returnPrice=n.res.totalAmount,1===t.num&&(s.outOrderList=[]),s.outOrderList=s.outOrderList.concat(a),s.$nextTick(function(){e.endSuccess(a.length)})}).catch(function(t){e.endErr()})},chosen:function(t,e){this.currentIndex=t,this.classId=e},reset:function(){this.currentIndex=0,this.beginTime="",this.endTime="",this.classId="",this.searchText=""},comfirm:function(){this.popupVisible=!1,this.mescroll.resetUpScroll()},handleSearch:function(t){this.search=!1,this.searchText=t,this.comfirm()},closeTouch:function(){document.getElementsByTagName("body")[0].addEventListener("touchmove",this.handler,{passive:!1})},openTouch:function(){document.getElementsByTagName("body")[0].removeEventListener("touchmove",this.handler,{passive:!1})},exPdfPrintReturnOrder:function(t,e){var s="{'wmsNo':'"+t+"','companyId':'"+this.$store.getters.account.companyId+"'}";this.$post("/returnorder/exPdfPrintReturnOrder.do",{content:s,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var e=JSON.parse(t);e.optFlag,n()(e.optDesc)})}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"header"},[s("header",{staticClass:"mint-header"},[s("div",{staticClass:"mint-header-button is-left",on:{click:t.back}},[t._m(0)]),t._v(" "),s("h1",{staticClass:"mint-header-title"},[t._v(t._s(t.orderTitle))]),t._v(" "),s("div",{staticClass:"mint-header-button is-right"},[s("button",{staticClass:"mint-button mint-button--default mint-button--normal",on:{click:function(e){t.popupVisible=!0}}},[s("i",{staticClass:"iconfont",staticStyle:{"font-size":"24px"}},[t._v("")])])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"mint-popup right-popup mint-popup-right",on:{click:function(e){t.popupVisible=!1}}}),t._v(" "),s("transition",{attrs:{name:"slide","enter-active-class":"animated slideInRight","leave-active-class":"animated slideOutRight"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-model"},[s("div",{staticClass:"model-wrap"},[s("div",{staticClass:"model-content"},[s("h5",{staticClass:"model-t"},[s("span",[t._v("退货单状态")])]),t._v(" "),s("div",{staticClass:"model-item"},t._l(t.dataList,function(e,i){return s("button",{key:i,class:{active:t.currentIndex===i},on:{click:function(s){t.chosen(i,e.value)}}},[t._v(t._s(e.name))])}),0)])]),t._v(" "),s("div",{staticClass:"model-wrap"},[s("div",{staticClass:"model-content"},[s("h5",{staticClass:"model-t"},[s("span",[t._v("下单时间")])]),t._v(" "),s("div",{staticClass:"model-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.beginTime,expression:"beginTime"}],attrs:{type:"text",placeholder:"起始时间",readonly:"readonly"},domProps:{value:t.beginTime},on:{focus:t.beginOpen,input:function(e){e.target.composing||(t.beginTime=e.target.value)}}}),s("span",{staticClass:"pie"},[t._v("-")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.endTime,expression:"endTime"}],attrs:{type:"datetime",placeholder:"截止时间",readonly:"readonly"},domProps:{value:t.endTime},on:{focus:t.endOpen,input:function(e){e.target.composing||(t.endTime=e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"handle-btn"},[s("button",{staticClass:"reset",on:{click:t.reset}},[t._v("重置")]),t._v(" "),s("button",{staticClass:"comfirm",on:{click:t.comfirm}},[t._v("确定")])])])]),t._v(" "),s("mt-datetime-picker",{ref:"beginPicker",attrs:{type:"date"},on:{confirm:t.handleConfirm},model:{value:t.dataVal,callback:function(e){t.dataVal=e},expression:"dataVal"}}),t._v(" "),s("mt-datetime-picker",{ref:"endPicker",attrs:{type:"date"},on:{confirm:t.handleConfirmTwo},model:{value:t.dataVal,callback:function(e){t.dataVal=e},expression:"dataVal"}}),t._v(" "),s("div",{staticClass:"order-list-info"},[s("div",{staticClass:"l"},[s("span",[t._v("退货单："+t._s(t.returnTotal)+"笔")])]),t._v(" "),s("div",{staticClass:"r"},[s("span",[t._v("退货总额："),s("em",[t._v("￥"+t._s(t._f("toFixed")(t.returnPrice)))])])])]),t._v(" "),s("mescroll-vue",{ref:"mescroll",attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[s("div",{attrs:{id:"mescroll"}},[s("div",{staticClass:"order-wrapper"},[s("ul",t._l(t.outOrderList,function(e,i){return s("li",{key:i,staticClass:"order-list"},[s("div",{staticClass:"list-h clearfix"},[s("span",{staticClass:"mui-pull-left"},[s("span",{staticClass:"iconfont def"},[t._v("")]),t._v(t._s(e.wmsNo))]),t._v(" "),s("span",{staticClass:"orderSt mui-pull-right"},[s("em",{staticClass:"blue"},[t._v(t._s(e.asnStatus))])])]),t._v(" "),s("div",{staticClass:"order-info"},[s("h4",{staticClass:"order-title"},[t._v(t._s(e.shopName))]),t._v(" "),s("p",{staticClass:"clearfix"},[s("span",{staticClass:"order-n"},[t._v("发起时间："+t._s(e.createTime))])]),t._v(" "),s("span",{staticClass:"price"},[t._v("退货金额：¥"+t._s(t._f("toFixed")(e.sumAmount)))])]),t._v(" "),s("div",{staticClass:"list-b clearfix"},[s("router-link",{staticClass:"mui-btn",attrs:{to:{path:"/returnOrderDetail",query:{id:e.wmsNo,type:1}},tag:"button"}},[t._v("\n                                查看详情\n                            ")]),t._v(" "),s("button",{staticClass:"mui-btn",on:{click:function(s){t.exPdfPrintReturnOrder(e.wmsNo,i)}}},[t._v("\n                                打印退货单\n                            ")])],1)])}),0)])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"mint-button mint-button--default mint-button--normal"},[e("span",{staticClass:"mint-button-icon"},[e("i",{staticClass:"mintui mintui-back"})]),this._v(" "),e("label",{staticClass:"mint-button-text"})])}]};var c=s("VU/8")(r,l,!1,function(t){s("+qwh")},"data-v-f9474f7e",null);e.default=c.exports}});