webpackJsonp([61],{"46Nh":function(t,e){},YoCb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("34+y");var n=s("X+yh"),o=s.n(n),i=(s("OgVB"),s("/Lyv")),a=s.n(i),c=s("p0f0"),r=(s("0xDb"),{name:"vpOrderList",components:{MescrollVue:c.a},data:function(){return{searchText:"",search:!1,mescroll:null,mescrollDown:{},mescrollUp:{callback:this.upCallback,page:{num:0,size:10},htmlNodata:'<p class="upwarp-nodata">-- 没有更多了 --</p>',noMoreSize:5,empty:{warpId:"mescroll",icon:"static/images/none.png",tip:"暂无相关数据~"}},classId:this.$route.query.typeId||"",payStatus:this.$route.query.payStatus||"",currentIndex:0,popupVisible:!1,dataList:[{name:"全部",value:""},{name:"待审核",value:"7,8,9"},{name:"待配送",value:"1"},{name:"配送中",value:"2"},{name:"已签收",value:"3"},{name:"已取消",value:"4"}],orderList:[]}},beforeRouteEnter:function(t,e,s){s(function(t){t.$refs.mescroll.beforeRouteEnter()})},beforeRouteLeave:function(t,e,s){this.$refs.mescroll.beforeRouteLeave(),s()},watch:{popupVisible:function(t){t?this.closeTouch():this.openTouch()}},computed:{orderTitle:function(){return""==this.classId?"全部样品":"7,8,9"==this.classId?"待审核样品":"1"==this.classId||"1,7,8,9"==this.classId?"待配送样品":"2"==this.classId?"配送中样品":"3"==this.classId?"已签收样品":"4"==this.classId?"已取消样品":void 0}},methods:{hide:function(){this.search=!1},back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.back(-1)},mescrollInit:function(t){this.mescroll=t},upCallback:function(t,e){var s=this,n=this.$store.getters.account,o='{"companyId": "'+n.companyId+'","account": "'+n.account+'","shopId":"'+n.shopId+'","handleStatus": "'+this.classId+'","pageSize": "'+t.size+'","pageNo": "'+t.num+'"}';this.$post("/appOrder/getGiftOrderList.do",{content:o,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(n){var o=JSON.parse(n).res;1===t.num&&(s.orderList=[]),s.orderList=s.orderList.concat(o),s.$nextTick(function(){e.endSuccess(o.length)})}).catch(function(t){e.endErr()})},chosen:function(t,e){this.currentIndex=t,this.classId=e},reset:function(){this.currentIndex=0,this.classId="",this.searchText=""},sureOrder:function(t,e){var s=this;a.a.confirm("确定签收吗?").then(function(n){var i=s.$store.getters.account.account,a="{'orderCode':'"+t+"','account':'"+i+"'}";s.$post("/appVpOrder/receiveOrderBySale.do",{content:a,version:"kkllo",login_token:s.$store.getters.logintoken}).then(function(t){var n=JSON.parse(t);"yes"==n.optFlag?(""!=s.classId?s.orderList.splice(e,1):s.orderList[e].handleStatus=3,o()(n.optDesc)):o()(n.optDesc)})}).catch(function(){})},comfirm:function(){this.popupVisible=!1,this.mescroll.resetUpScroll()},closeTouch:function(){document.getElementsByTagName("body")[0].addEventListener("touchmove",this.handler,{passive:!1})},openTouch:function(){document.getElementsByTagName("body")[0].removeEventListener("touchmove",this.handler,{passive:!1})},cancel:function(t,e,s){var n=this;this.$post("/appGift/cancelOrder.do",{content:'{"orderCode":"'+t+'"}',version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var i=JSON.parse(t);1==i.flag?(o()({message:i.message,time:2}),s.handleStatus="已取消",n.$set(n.orderList,e,s)):o()(i.message)}).catch(function(t){console.log(t)})}}}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"header"},[s("mt-header",{attrs:{title:t.orderTitle}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"}),t._v(" "),s("mt-button",{attrs:{slot:"right",icon:""},on:{click:function(e){t.popupVisible=!0}},slot:"right"},[s("i",{staticClass:"iconfont",staticStyle:{"font-size":"24px"}},[t._v("")])])],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"mint-popup right-popup mint-popup-right",on:{click:function(e){t.popupVisible=!1}}}),t._v(" "),s("transition",{attrs:{name:"slide","enter-active-class":"animated slideInRight","leave-active-class":"animated slideOutRight"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popup-model"},[s("div",{staticClass:"model-wrap"},[s("div",{staticClass:"model-content"},[s("h5",{staticClass:"model-t"},[s("span",[t._v("申报状态")])]),t._v(" "),s("div",{staticClass:"model-item"},t._l(t.dataList,function(e,n){return s("button",{key:n,class:{active:t.currentIndex===n},on:{click:function(s){t.chosen(n,e.value)}}},[t._v(t._s(e.name))])}),0)])]),t._v(" "),s("div",{staticClass:"handle-btn"},[s("button",{staticClass:"comfirm",on:{click:t.comfirm}},[t._v("确定")])])])]),t._v(" "),s("mescroll-vue",{ref:"mescroll",attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[s("div",{attrs:{id:"mescroll"}},[s("div",{staticClass:"bodyMid"},t._l(t.orderList,function(e,n){return s("ul",{key:n},[s("li",[s("div",{staticClass:"head"},[s("span",[t._v("单号:"+t._s(e.orderCode))]),t._v(" "),s("span",[t._v(t._s(e.handleStatus))]),t._v(" "),"待审核"==e.handleStatus||"待配送"==e.handleStatus?s("span",{on:{click:function(s){t.cancel(e.orderCode,n,e)}}},[t._v("取消申请")]):t._e()]),t._v(" "),t._l(e.set,function(e,n){return s("div",{key:n,staticClass:"body_"},[s("div",{staticClass:"body_img"},[s("img",{attrs:{src:t.baseurl+e.imgPath}})]),t._v(" "),s("div",{staticClass:"body_name"},[s("span",[t._v(t._s(e.skuName))]),t._v(" "),s("span",[t._v("×"+t._s(e.qty))])]),t._v(" "),s("div",{staticClass:"body_Specifications"},[s("span",[t._v(t._s(e.styleno))])]),t._v(" "),s("div",{staticClass:"body_describe",domProps:{innerHTML:t._s(e.skuDec)}},[t._v("\n                                "+t._s(e.skuDec)+"\n                            ")])])})],2)])}),0)])])],1)},staticRenderFns:[]};var u=s("VU/8")(r,l,!1,function(t){s("46Nh")},"data-v-050cd2f5",null);e.default=u.exports}});