webpackJsonp([20],{QCZ3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("34+y");var n=i("X+yh"),s=i.n(n),o=i("teIl"),r=i("0xDb"),a={name:"confirmOrder",components:{Header:o.a},data:function(){return{customerName:"",phone:"",province:"",city:"",provinceList:[],cityList:[]}},created:function(){this.initProvinceList()},methods:{checkCard:function(){if(this.customerName){/^[a-zA-Z0-9\u4e00-\u9fa5-（）()-+]+$/.test(this.customerName)||s()("客户名只能含汉字，数字，英文(可以带括号 + -)")}},phone1:function(t,e){if(t)return Object(r.h)(t)||Object(r.g)(t)?void 0:(this.phone="",s()({message:"手机号格式不正确",duration:1e3}),!1)},loadCity:function(t){var e=this,i="{'parentid':'"+t+"'}";this.province=t,this.$post("/appRegister/cityList.do",{content:i,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(t){var i=JSON.parse(t);"yes"==i.optFlag?(e.cityList=i.res,e.cityList.length>0?e.city=e.cityList[0].id:e.city=""):s()({message:"地址初始化失败",duration:1e3})})},initProvinceList:function(){var t=this,e="{'company_id':'"+(this.$store.getters.account.companyId?this.$store.getters.account.companyId:Object(r.d)())+"'}";this.$post("/appRegister/provinceList.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var i=JSON.parse(e);"yes"==i.optFlag?t.provinceList=i.res:s()({message:i.optDesc,duration:1e3})})},commit:function(){var t=this;if(""==this.customerName)return s()("请输入客户名称"),!1;if(""==this.phone)return s()("请输入手机号"),!1;if(""==this.province)return s()("请选择区域"),!1;var e="",i="";this.provinceList&&this.provinceList.map(function(i){i.id==t.province&&(e=i.title)}),this.cityList,this.cityList.map(function(e){e.id==t.city&&(i=e.title)});var n="{'customerName':'"+this.customerName+"','phone':'"+this.phone+"','province':'"+e+"','city':'"+i+"'}";this.$post("/mobileShop/addJoinCustomer.do",{content:n,version:"kkllo",login_token:this.$store.getters.logintoken?this.$store.getters.logintoken:""}).then(function(e){var i=JSON.parse(e);"yes"==i.optFlag?(s()({message:"报名成功",duration:1e3}),t.$router.push({path:"/"})):s()({message:i.optDesc,duration:1e3})})}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Header",{attrs:{title:"加盟客户"}}),t._v(" "),i("div",{staticClass:"my-content"},[i("div",{staticClass:"form-wrapper"},[i("mt-field",{attrs:{label:"客户名称",placeholder:"请输入客户名称"},nativeOn:{"!blur":function(e){return t.checkCard(e)}},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:"customerName"}},[i("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),i("mt-field",{attrs:{label:"手机号码",placeholder:"请输入手机号码",type:"tel"},nativeOn:{"!blur":function(e){t.phone1(t.phone,2)}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}},[i("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),i("div",{staticClass:"mint-cell mint-field"},[i("div",{staticClass:"mint-cell-left"}),t._v(" "),i("div",{staticClass:"mint-cell-wrapper"},[t._m(0),t._v(" "),i("div",{staticClass:"mint-cell-value"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.province,expression:"province"}],staticClass:"required",attrs:{name:"province",id:"province"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.province=e.target.multiple?i:i[0]},function(e){t.loadCity(t.province)}]}},[i("option",{attrs:{disabled:"",value:""}},[t._v(" 请选择")]),t._v(" "),t._l(t.provinceList,function(e,n){return i("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"},{name:"show",rawName:"v-show",value:t.cityList&&t.cityList.length>0,expression:"cityList && cityList.length > 0"}],attrs:{name:"city",id:"city"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.city=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.cityList,function(e,n){return i("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),t._m(1)])])])],1),t._v(" "),i("div",{staticClass:"bottom-btn"},[i("button",{staticClass:"def-btn",attrs:{type:"button"},on:{click:t.commit}},[t._v("提交")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("区域")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-field-other"},[e("span",{staticStyle:{color:"red"},attrs:{"data-v-7c0b8970":""}},[this._v("*")])])}]};var l=i("VU/8")(a,c,!1,function(t){i("wRLb")},"data-v-d6038ea8",null);e.default=l.exports},wRLb:function(t,e){}});