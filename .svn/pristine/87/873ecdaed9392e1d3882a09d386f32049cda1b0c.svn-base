webpackJsonp([8],{"6Ok+":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("OgVB");var a=e("/Lyv"),i=e.n(a),o=(e("34+y"),e("X+yh")),n=e.n(o),r=e("teIl"),l=e("GQaK"),c=e("Dd8w"),u=e.n(c),p=e("NYxO"),d=e("0xDb"),f={name:"shopBar",data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[]}},computed:u()({},Object(p.a)(["sampleCount"]),{disabled:function(){return 0==this.sampleCount}}),methods:{commit:function(){this.$router.push({path:"/cofirmSimple"})},popupVisible:function(){this.$emit("popupOpen")},drop:function(t){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(!e.show)return e.show=!0,e.el=t,void this.dropBalls.push(e)}},beforeDrop:function(t){for(var s=this.balls.length;s--;){var e=this.balls[s];if(e.show){var a=e.el.getBoundingClientRect(),i=a.left,o=-(window.innerHeight-a.top-52);t.style.display="",t.style.webkitTransform="translate3d(0,"+o+"px,0)",t.style.transform="translate3d(0,"+o+"px,0)";var n=t.getElementsByClassName("inner-hook")[0];n.style.webkitTransform="translate3d("+i+"px,0,0)",n.style.transform="translate3d("+i+"px,0,0)"}}},dropping:function(t,s){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("inner-hook")[0];e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)",t.addEventListener("transitionend",s)})},afterDrop:function(t){var s=this.dropBalls.shift();s&&(s.show=!1,t.style.display="none")}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("footer",{staticClass:"shop_cart"},[e("div",{staticClass:"gwcInfo",class:[t.sampleCount>0?"fill":""],on:{click:function(s){return s.stopPropagation(),t.popupVisible(s)}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.sampleCount>0,expression:"sampleCount>0"}]},[t._v(t._s(t.sampleCount))])]),t._v(" "),e("button",{attrs:{type:"button",disabled:t.disabled},on:{click:t.commit}},[t._v("立即申请")])]),t._v(" "),e("div",{staticClass:"ball-container"},t._l(t.balls,function(s,a){return e("div",{key:a},[e("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"ball.show"}],staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])])],1)}),0)])},staticRenderFns:[]};var v=e("VU/8")(f,h,!1,function(t){e("o84b")},"data-v-b9118e8c",null).exports,m=(e("lRwf"),{props:{food:{type:Object}},methods:{addCart:function(t,s){if("N"==s.is_enable)return n()({message:"该商品已下架！",duration:950}),!1;var e=this.$store.state.sample.findIndex(function(t){return t.giftId==s.giftId});if(-1===e||null==e||void 0==e)s.value=1,s.checked=!0,this.$store.commit("addsampleCarts",s),this.$emit("addCart",t.target);else{if("Y"==s.is_gift)return i()("提示","赠品时不能修改数量，默认为1"),s.value=1,!1;s.checked=!0,this.$store.commit("addsample",e),this.$emit("addCart",t.target)}}}}),_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartcontrol"},[e("button",{staticClass:"cart-btn",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.addCart(s,t.food)}}},[e("span",[t._v("免费拿样")])])])},staticRenderFns:[]};var b={name:"applySimple",components:{samplecontrol:e("VU/8")(m,_,!1,function(t){e("LA8g")},"data-v-3e5925b0",null).exports,shopBar:v,MescrollVue:e("p0f0").a,Header:r.a},data:function(){return{popupVisible:!1,currentIndex:0,curIndex:"",mescroll:null,mescrollDown:{},mescrollUp:{callback:this.upCallback,page:{num:0,size:10},htmlNodata:'<p class="upwarp-nodata">-- 没有更多了 --</p>',noMoreSize:5,empty:{warpId:"mescroll",icon:"static/images/none.png",tip:"暂无相关数据~"}},ProductS:[],classId:"",searchKey:sessionStorage.searchValue?sessionStorage.searchValue:"",classTwoId:"",classTwoList:"",ProductClass:[],popupSample:!1,fakeLoginInfo:this.$store.getters.fakeLoginInfo}},computed:{sample:function(){return this.$store.state.sample}},created:function(){this.initClass()},mounted:function(){},watch:{ProductClass:function(t,s){this.ProductClass.length>0&&0==this.currentIndex&&(this.classId=this.ProductClass[0].id)},popupSample:function(){this.$nextTick(function(){this.popupSample&&this._initScroll()})}},methods:{toShopCart:function(){this.$router.push({path:"/shopCart"})},mescrollInit:function(t){this.mescroll=t},beforeRouteEnter:function(t,s,e){e(function(t){t.$refs.mescroll.beforeRouteEnter()})},beforeRouteLeave:function(t,s,e){this.$refs.mescroll.beforeRouteLeave(),e()},addFood:function(t){this._drop(t)},_drop:function(t){var s=this;this.$nextTick(function(){s.$refs.shopcart.drop(t)})},back:function(){sessionStorage.searchValue="",this.$router.back(-1)},_initTab:function(){var t=this.$route.query.tab;if(t){var s=this.$refs.foodList[t];this.foodsScroll.scrollToElement(s,300,0,0)}},_initScroll:function(){this.meunScroll=new l.a(this.$refs.menuWrapper,{click:!0,probeType:3}),this.slider=new l.a(this.$refs.slider,{click:!0,scrollX:!0,eventPassthrough:"vertical"}),this.sampleCart=new l.a(this.$refs.sampleCart,{click:!0,probeType:3})},selectMenu:function(t,s){this.ProductS=[],this.popupVisible=!1,this.classId=s,this.curIndex="",this.searchKey="",sessionStorage.searchValue="",this.classTwoId="",this.currentIndex=t,this.classTwoList=this.ProductClass[t].classTwoList,this.mescroll.resetUpScroll()},selectSubMenu:function(t,s){this.popupVisible=!1,this.classTwoId=s,this.searchKey="",sessionStorage.searchValue="",this.curIndex=t,this.mescroll.resetUpScroll()},godetails:function(t){this.$router.push({path:"details",query:{id:t}})},search:function(t){t&&(sessionStorage.searchValue=t,this.searchKey=t,this.classId="",this.currentIndex="",this.mescroll.resetUpScroll())},initClass:function(){var t=this,s=Object(d.d)();this.$post("/appSaleManGift/saleGiftClass.do",{content:'{"companyId":"'+s+'"}',version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(s){var e=JSON.parse(s);"yes"==e.optFlag?(t.ProductClass=e.res.list,t.classId=e.res.list[0].id,t.classTwoList=e.res.list[0].classTwoList,t.$nextTick(function(){t._initScroll()})):n()("商品加载失败")})},upCallback:function(t,s){var e=this;setTimeout(function(){var a=Object(d.d)();e.searchKey&&(e.classId="",e.classTwoId="",e.currentIndex=-1,e.classTwoList=[]);var i=e.classId,o='{"companyId":"'+a+'","searchKey":"'+e.searchKey+'","classId":"'+i+'","classTwoId": "'+e.classTwoId+'","pageSize": "'+t.size+'","pageNo": "'+t.num+'"}';e.$post("/appSaleManGift/saleClassGiftList.do",{content:o,version:"kkllo",login_token:e.$store.getters.logintoken}).then(function(a){var i=JSON.parse(a);if(i.res&&i.res.length>0){var o=i.res;1===t.num&&(e.ProductS=[]),e.ProductS=e.ProductS.concat(o),e.$nextTick(function(){s.endSuccess(o.length)})}else e.ProductS=[],e.$nextTick(function(){s.endSuccess(e.ProductS.length)})}).catch(function(t){s.endErr()})},1e3)},clear:function(){this.$store.commit("clearsample"),this.popupSample=!1},appear:function(){this.popupSample=!this.popupSample},changeValue:function(t,s,e){var a=e.target.value;-1!=t.value.toString().indexOf(".")&&n()("样品数量只能输入整数"),t.value=parseInt(a.toString().replace(/[^\d]+/g,""))||0,Object(d.f)(t.value)&&(n()("样品数量不能为空"),t.value=1)},addCart:function(t,s){if("Y"==t.is_gift)return i()("提示","赠品时不能修改数量，默认为1"),!1;this.$store.commit("addsample",s)},decreaseCart:function(t,s){var e=this;1==this.$store.state.sample[s].value?i.a.confirm("确定删除该样品?").then(function(t){e.$store.commit("reducesample",s)}).catch(function(){}):this.$store.commit("reducesample",s)}}},C={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"classify",staticStyle:{height:"100VH"}},[e("Header",{attrs:{title:"样品申报"}}),t._v(" "),e("div",{staticClass:"header"},[e("mt-header",{attrs:{title:"样品申报"}},[e("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.back},slot:"left"})],1)],1),t._v(" "),e("div",{staticClass:"top-bar clearfix",staticStyle:{"box-shadow":"none"}},[e("div",{staticClass:"top-bar-box"},[e("div",{staticClass:"top_search  mui-pull-left"},[e("span",{staticClass:"search-icon iconfont"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"mui-pull-left",attrs:{type:"search",placeholder:"输入食材名称/编码/拼音搜索",id:"search_input"},domProps:{value:t.searchKey},on:{keyup:function(s){if(!("button"in s)&&t._k(s.keyCode,"enter",13,s.key,"Enter"))return null;t.search(t.searchKey)},input:function(s){s.target.composing||(t.searchKey=s.target.value)}}}),t._v(" "),e("button",{staticClass:"search_btn",on:{click:function(s){t.search(t.searchKey)}}},[t._v("搜索")])])])]),t._v(" "),e("div",{staticClass:"tab tabContent classifyBox"},[e("div",{ref:"menuWrapper",staticClass:"left menu-wrapper"},[e("ul",{attrs:{id:"typeList"}},t._l(t.ProductClass,function(s,a){return e("li",{key:a,ref:"menuList",refInFor:!0,class:{cur:t.currentIndex===a},attrs:{id:s.id,index:a},on:{click:function(e){e.stopPropagation(),t.selectMenu(a,s.id)}}},[e("span",[t._v(t._s(s.name))])])}),0)]),t._v(" "),e("div",{ref:"foodsWrapper",staticClass:"right foods-wrapper",attrs:{id:"goodsList"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.classTwoList.length>0&&""!==t.currentIndex,expression:"classTwoList.length > 0 && currentIndex !== ''"}],staticClass:"fixed-bar"},[e("div",{ref:"slider",staticClass:"slider"},[e("div",{staticClass:"slider-group"},t._l(t.classTwoList,function(s,a){return e("div",{key:a,staticClass:"slider-item",class:{cur:t.curIndex===a},attrs:{id:s.id},on:{click:function(e){t.selectSubMenu(a,s.id)}}},[t._v("\n                            "+t._s(s.name)+"\n                        ")])}),0)]),t._v(" "),e("div",{staticClass:"up-down",on:{click:function(s){t.popupVisible=!t.popupVisible}}},[e("span",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"popupVisible",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.popupVisible=!1}}},[e("div",{staticClass:"popWrap"},t._l(t.classTwoList,function(s,a){return e("div",{key:a,staticClass:"pop-item",class:{cur:t.curIndex===a},attrs:{id:s.id},on:{click:function(e){t.selectSubMenu(a,s.id)}}},[e("span",[t._v(t._s(s.name))])])}),0)])]),t._v(" "),e("mescroll-vue",{ref:"mescroll",class:[t.classTwoList.length>0&&""!==t.currentIndex?"top-mescroll":""],attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[e("div",{attrs:{id:"mescroll"}},[e("div",{ref:"foodList",staticClass:"tab_content"},[e("ul",{staticClass:"goods-list"},t._l(t.ProductS,function(s,a){return e("li",{key:a,staticClass:"mui-table-view-cell",attrs:{giftId:s.giftId}},[e("router-link",{staticClass:"food-link",attrs:{to:{path:"/simpleDetail",query:{id:s.giftId}},tag:"div"}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseurl+s.img_path,expression:"baseurl+food.img_path"}]}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:"Y"!=s.is_enable,expression:"food.is_enable != 'Y'"}],staticClass:"is_enable"},[t._v("已下架")]),t._v(" "),e("div",{staticClass:"recommend sales-info"},[e("h4",{staticClass:"skuName"},[t._v(t._s(s.sku_name))]),t._v(" "),e("p",{staticClass:"styleno"},[t._v("规格："+t._s(s.styleno))]),t._v(" "),e("span",{staticClass:"price",staticStyle:{"font-size":"11px",color:"#888"}},[t._v("商品编码："+t._s(s.sku_code))])])]),t._v(" "),e("div",{staticClass:"cartcontrol-wrapper"},[e("samplecontrol",{attrs:{food:s},on:{addCart:t.addFood}})],1)],1)}),0)])])])],1)]),t._v(" "),e("section",{directives:[{name:"show",rawName:"v-show",value:t.popupSample,expression:"popupSample"}],staticClass:"dialogMask",attrs:{id:"dialogMask"},on:{click:function(s){t.popupSample=!1}}}),t._v(" "),e("transition",{attrs:{name:"slide","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.popupSample,expression:"popupSample"}],staticClass:"dialog-wrapper",attrs:{id:"dialog"}},[e("div",{staticClass:"dialog-box"},[e("div",{staticClass:"popup"},[e("div",{staticClass:"popup-header"},[e("span",[t._v("已选样品")]),t._v(" "),e("span",{staticClass:"iconfont clearpopup",on:{click:t.clear}},[t._v("清空")])]),t._v(" "),e("div",{ref:"sampleCart",staticClass:"cart-wrapper"},[e("div",[e("ul",t._l(t.sample,function(s,a){return e("li",{key:a,staticClass:"mui-input-row mui-checkbox mui-left"},[e("label",{staticClass:"sku_name"},[t._v(t._s(s.sku_name))]),t._v(" "),e("div",{staticClass:"cartcontrol-wrapper",staticStyle:{right:"25px"}},[e("div",{staticClass:"cartcontrol"},[e("button",{staticClass:"cart-decrease",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.decreaseCart(s,a)}}},[t._v("-")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"car.value"}],staticClass:"cart-count",attrs:{type:"number",step:"1",min:"0",id:s.id,onkeyup:"value=value.replace(/[^\\d]+/g,'')",onpaste:"value=value.replace(/[^\\d]+/g,'')",oncontextmenu:"value=value.replace(/[^\\d]+/g,'')"},domProps:{value:s.value},on:{blur:function(e){t.changeValue(s,a,e)},input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}),t._v(" "),e("button",{staticClass:"cart-add",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.addCart(s,a)}}},[t._v("+")])])]),t._v(" "),e("em",{staticClass:"uomDefault"},[t._v(t._s(s.uom_default))])])}),0)])])])])])]),t._v(" "),e("shopBar",{ref:"shopcart",on:{popupOpen:t.appear}})],1)},staticRenderFns:[]};var g=e("VU/8")(b,C,!1,function(t){e("Kb7q")},"data-v-29d9bce4",null);s.default=g.exports},Kb7q:function(t,s){},LA8g:function(t,s){},o84b:function(t,s){}});