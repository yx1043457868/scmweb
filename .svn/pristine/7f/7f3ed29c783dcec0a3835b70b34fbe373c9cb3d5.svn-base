webpackJsonp([53],{Gsg3:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("34+y");var s=o("X+yh"),n=o.n(s),i=o("teIl"),a=o("0xDb"),r=(o("NC6I"),{name:"Login",components:{Header:i.a},data:function(){return{account:"",pwd:"",phone:"",secCode:"",inviteCode:"",pcid:"",disabled:!1,count:60,code_text:"获取验证码",intervalobj:null,oneStep:!0,twoStep:!1}},created:function(){},computed:{disabledReg:function(){return""==this.account},disabledCommit:function(){return""==this.secCode}},methods:{commit:function(){var t=this;if(""==this.secCode)return n()({message:"请输入您的验证码号",duration:1e3}),!1;var e="{'phone':'"+this.phone+"','yzm':'"+this.secCode+"'}";this.$post("/appAccount/yzmLogin.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){var o=JSON.parse(e);if("yes"==o.optFlag){n()({message:"登录成功",duration:1e3}),t.$store.commit("setData",o.res);var s=o.res.company,i=o.res.account;o.res.shop;t.$store.commit("setpcid",parseFloat(s.id));var a=i.id?i.id:"",r=t.$route.query.redirect;if("1"!=i.role)return n()("您不是注册客户"),t.$store.commit("loginOut"),!1;o.res.isFirstLogin?t.$router.push({path:"/accountEdit",query:{firstFlag:1}}):r?t.$router.replace(r):window.location.href=location.origin+"/?pcid="+s.id+"&shareId="+a}else n()({message:o.optDesc,duration:1e3})})},sendCode:function(){var t=this;if(""==this.phone)return n()({message:"请输入手机号",duration:1e3}),!1;if(!Object(a.g)(this.phone))return n()({message:"请输入正确的手机号格式",duration:1e3}),!1;var e="{'phone':'"+this.phone+"'}";this.$post("/appAccount/sendLoginYzm.do",{content:e,version:"kkllo",login_token:this.$store.getters.logintoken}).then(function(e){console.log(e);var o=JSON.parse(e);"yes"==o.optFlag?(t.intervalobj=setInterval(function(){t.count>0?(t.code_text=t.count+"s后重新获取",t.disabled=!0,t.count--):0==t.count&&(t.code_text="获取验证码",t.disabled=!1,clearInterval(t.intervalobj),t.count=60)},1e3),n()({message:"发送成功",duration:1e3})):n()({message:o.optDesc,duration:3e3})})}}}),c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("Header",{attrs:{title:"验证码快捷登录"}}),t._v(" "),o("div",{staticClass:"login-box"},[t._m(0),t._v(" "),o("div",{staticClass:"login-group"},[o("form",{attrs:{action:"",autocomplete:"off"}},[o("div",{staticClass:"input-item"},[t._m(1),t._v(" "),o("span",{staticClass:"pie"},[t._v("|")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",placeholder:"请输入您的手机号",autofocus:"autofocus"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"input-item"},[t._m(2),t._v(" "),o("span",{staticClass:"pie"},[t._v("|")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.secCode,expression:"secCode"}],attrs:{type:"text",placeholder:"请输入手机验证码"},domProps:{value:t.secCode},on:{input:function(e){e.target.composing||(t.secCode=e.target.value)}}}),t._v(" "),o("button",{staticClass:"reg-btn",attrs:{type:"button",disabled:t.disabled},on:{click:t.sendCode}},[t._v(t._s(t.code_text))])]),t._v(" "),o("button",{staticClass:"login-btn",attrs:{type:"button",size:"large",disabled:t.disabledCommit},on:{click:t.commit}},[t._v("登录")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-logo",staticStyle:{"padding-top":"120px"}},[e("img",{attrs:{src:o("7Otq"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("i",{staticClass:"icon iconfont"},[this._v("")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("i",{staticClass:"icon iconfont"},[this._v("")])])}]};var l=o("VU/8")(r,c,!1,function(t){o("n/Vq")},"data-v-2f2ba0a2",null);e.default=l.exports},"n/Vq":function(t,e){}});